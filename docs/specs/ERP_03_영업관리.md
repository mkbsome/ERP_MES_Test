# ERP 영업관리 모듈 기능정의서

## 1. 모듈 개요

| 항목 | 내용 |
|------|------|
| 모듈 ID | ERP-SD |
| 모듈명 | 영업관리 (Sales & Distribution) |
| 화면 수 | 10개 |
| 목적 | 견적부터 수주, 출하, 매출 처리까지 영업 프로세스 전반 관리 |
| 대상 사용자 | 영업팀, 물류팀, 회계팀 |
| 핵심 기능 | 견적 관리, 수주 관리, 출하 처리, 매출 관리, 채권 관리 |

## 2. 화면 목록

| 화면 ID | 화면명 | 우선순위 | 설명 |
|---------|--------|----------|------|
| ERP-SD-001 | 견적서 관리 | P1 | 견적서 등록/발행/조회 |
| ERP-SD-002 | 수주등록 | P1 | 판매주문 등록/관리 |
| ERP-SD-003 | 수주현황 조회 | P1 | 수주 진행 상태 모니터링 |
| ERP-SD-004 | 출하지시 관리 | P1 | 출하지시서 생성/관리 |
| ERP-SD-005 | 출하처리 | P1 | 출하 등록/확정 |
| ERP-SD-006 | 매출전표 관리 | P1 | 매출 전표 생성/관리 |
| ERP-SD-007 | 채권현황 조회 | P1 | 거래처별 채권 현황 |
| ERP-SD-008 | 수금처리 | P2 | 수금 등록/관리 |
| ERP-SD-009 | 영업실적 분석 | P2 | 영업 성과 분석/리포트 |
| ERP-SD-010 | 고객 분석 | P2 | 고객별 거래 분석 |

---

## 3. 화면별 상세 정의

### 3.1 ERP-SD-001: 견적서 관리

#### 3.1.1 화면 목적
- 고객 요청에 따른 견적서 작성 및 발행 관리

#### 3.1.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 견적서 관리                           [신규] [저장] [발행] [인쇄]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 견적일자: [2024-01-01] ~ [2024-01-31]  상태: [전체    ▼]  │ │
│ │ 고객사: [                 ]  견적번호: [         ]  [검색] │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 견적서 목록 ─────────────────────────────────────────────┐ │
│ │ 견적번호    │견적일자│고객사      │담당자│유효일  │상태│금액     │ │
│ │─────────────┼───────┼──────────┼─────┼──────┼───┼───────│ │
│ │ QT24010001  │01-10  │삼성전자(주)│김영업│01-31 │발행│85,000,000│ │
│ │ QT24010002  │01-12  │LG전자(주) │이영업│01-28 │수주│42,000,000│ │
│ │ QT24010003  │01-15  │현대모비스 │박영업│02-15 │작성│65,000,000│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 견적서 상세 ─────────────────────────────────────────────┐ │
│ │ 견적번호: [QT24010001   ]  견적일자: [2024-01-10]          │ │
│ │ 고객사: [삼성전자(주)  ▼]  담당자: [김영업     ]           │ │
│ │ 유효기간: [2024-01-31    ]  결제조건: [월말 30일 ▼]        │ │
│ │ 납품장소: [삼성전자 수원사업장]  비고: [            ]       │ │
│ │                                                             │ │
│ │ ┌─ 견적품목 ─────────────────────────────────────────────┐│ │
│ │ │ No│품목코드    │품명          │규격    │수량│단가  │금액    ││ │
│ │ │───┼───────────┼─────────────┼───────┼───┼─────┼───────││ │
│ │ │ 1 │PCB-MB-001 │스마트폰메인보드│6Layer │5,000│12,000│60,000,000││ │
│ │ │ 2 │PCB-PW-001 │전원보드       │4Layer │3,000│5,000 │15,000,000││ │
│ │ │ 3 │PCB-LED-001│LED드라이버    │2Layer │2,000│5,000 │10,000,000││ │
│ │ │───┼───────────┼─────────────┼───────┼───┼─────┼───────││ │
│ │ │                                    공급가액: │85,000,000││ │
│ │ │                                    VAT:     │8,500,000 ││ │
│ │ │                                    총액:    │93,500,000││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │                                      [품목추가] [품목삭제]  │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.1.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| quote_no | VARCHAR(12) | Y | 견적번호 (QT+년월+일련번호) |
| quote_date | DATE | Y | 견적일자 |
| customer_code | VARCHAR(10) | Y | 고객사 코드 |
| sales_rep | VARCHAR(50) | Y | 영업담당자 |
| valid_until | DATE | Y | 견적 유효기간 |
| payment_term | VARCHAR(20) | Y | 결제조건 |
| delivery_loc | VARCHAR(100) | N | 납품장소 |
| status | VARCHAR(10) | Y | 상태 (작성/발행/수주/만료/취소) |
| supply_amount | DECIMAL(15,2) | Y | 공급가액 |
| vat_amount | DECIMAL(15,2) | Y | 부가세 |
| total_amount | DECIMAL(15,2) | Y | 총액 |

#### 3.1.4 비즈니스 로직
```
1. 견적서 생성
   - 견적번호 자동채번: QT + 년월(4자리) + 일련번호(4자리)
   - 유효기간 기본: 견적일 + 30일
   - 단가: 품목별 판매단가 자동 조회, 수정 가능

2. 견적 발행
   - 상태 → '발행'
   - 발행일시, 발행자 기록
   - PDF/이메일 발송 기능

3. 수주 전환
   - 견적서 기반 수주 자동 생성
   - 상태 → '수주'
   - 견적번호 참조 유지

4. 만료 처리
   - 유효기간 경과 시 자동 '만료' 처리
   - 만료 D-3 알림 발송
```

---

### 3.2 ERP-SD-002: 수주등록

#### 3.2.1 화면 목적
- 고객 주문 접수 및 판매주문 등록

#### 3.2.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 수주등록                               [신규] [저장] [확정] [취소]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 수주일자: [2024-01-01] ~ [2024-01-31]  상태: [전체    ▼]  │ │
│ │ 고객사: [                 ]  수주번호: [         ]  [검색] │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수주 목록 ───────────────────────────────────────────────┐ │
│ │ 수주번호    │수주일자│고객사      │납기    │상태  │금액      │ │
│ │─────────────┼───────┼──────────┼───────┼─────┼────────│ │
│ │ SO24010001  │01-15  │삼성전자   │02-15  │생산중│85,000,000 │ │
│ │ SO24010002  │01-16  │LG전자    │02-20  │확정  │42,000,000 │ │
│ │ SO24010003  │01-17  │현대모비스 │02-28  │작성  │65,000,000 │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수주 상세 ───────────────────────────────────────────────┐ │
│ │ 수주번호: [SO24010001   ]  수주일자: [2024-01-15]          │ │
│ │ 고객사: [삼성전자(주)  ▼]  담당자: [김영업     ]           │ │
│ │ 고객PO: [SEPO-2024-0115 ]  납기일자: [2024-02-15]          │ │
│ │ 납품장소: [삼성전자 수원사업장]  결제조건: [월말 30일 ▼]    │ │
│ │                                                             │ │
│ │ ┌─ 수주품목 ─────────────────────────────────────────────┐│ │
│ │ │ No│품목코드    │품명          │수량│단가  │금액    │납기  ││ │
│ │ │───┼───────────┼─────────────┼───┼─────┼───────┼─────││ │
│ │ │ 1 │PCB-MB-001 │스마트폰메인보드│5,000│12,000│60,000,000│02-15││ │
│ │ │ 2 │PCB-PW-001 │전원보드       │3,000│5,000 │15,000,000│02-15││ │
│ │ │ 3 │PCB-LED-001│LED드라이버    │2,000│5,000 │10,000,000│02-20││ │
│ │ │───┼───────────┼─────────────┼───┼─────┼───────┼─────││ │
│ │ │                                    공급가액: │85,000,000││ │
│ │ │                                    VAT:     │8,500,000 ││ │
│ │ │                                    총액:    │93,500,000││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │ 참조견적: [QT24010001] [견적서조회]   [품목추가] [품목삭제] │ │
│ │                                                             │ │
│ │ ┌─ 생산현황 ─────────────────────────────────────────────┐│ │
│ │ │ 품목        │수주량│생산지시│생산완료│재고 │출하가능   ││ │
│ │ │ PCB-MB-001  │5,000 │5,000  │3,500  │200 │3,700      ││ │
│ │ │ PCB-PW-001  │3,000 │3,000  │3,000  │500 │3,500 (완료)││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.2.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| so_no | VARCHAR(12) | Y | 수주번호 (SO+년월+일련번호) |
| so_date | DATE | Y | 수주일자 |
| customer_code | VARCHAR(10) | Y | 고객사 코드 |
| customer_po | VARCHAR(30) | N | 고객 발주번호 |
| sales_rep | VARCHAR(50) | Y | 영업담당자 |
| due_date | DATE | Y | 납기일자 |
| payment_term | VARCHAR(20) | Y | 결제조건 |
| delivery_loc | VARCHAR(100) | N | 납품장소 |
| status | VARCHAR(10) | Y | 상태 (작성/확정/생산중/출하대기/부분출하/출하완료/취소) |
| supply_amount | DECIMAL(15,2) | Y | 공급가액 |
| vat_amount | DECIMAL(15,2) | Y | 부가세 |
| total_amount | DECIMAL(15,2) | Y | 총액 |
| quote_no | VARCHAR(12) | N | 참조 견적번호 |

#### 3.2.4 비즈니스 로직
```
1. 수주 등록
   - 수주번호 자동채번: SO + 년월(4자리) + 일련번호(4자리)
   - 견적서에서 자동 생성 또는 직접 입력
   - 초기 상태: '작성'

2. 수주 확정
   - 상태 → '확정'
   - 재고/ATP 확인 (Available To Promise)
   - 생산계획 연동 (MPS에 반영)
   - MES 작업지시 자동 생성 트리거

3. 생산현황 연동
   - MES 생산실적 실시간 조회
   - 출하가능수량 = 생산완료 + 재고 - 기출하

4. 납기 관리
   - 납기 D-7: 출하 준비 알림
   - 납기 지연 예상 시: 영업담당 알림
```

---

### 3.3 ERP-SD-003: 수주현황 조회

#### 3.3.1 화면 목적
- 수주 진행 상태 모니터링 및 납기 관리

#### 3.3.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 수주현황 조회                                         [엑셀]    │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 납기일자: [2024-01-01] ~ [2024-02-28]                       │ │
│ │ 상태: [▣전체 ☑확정 ☑생산중 ☑출하대기 □출하완료]            │ │
│ │ 고객사: [            ▼]  품목: [              ]  [검색]     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수주현황 요약 ───────────────────────────────────────────┐ │
│ │ 총 수주금액: 850,000,000원  │  미출하금액: 425,000,000원   │ │
│ │ 수주건수: 45건             │  출하대기: 12건               │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수주현황 상세 ───────────────────────────────────────────┐ │
│ │ 수주번호│고객사   │품목      │수주량│출하량│잔량│납기 │D-Day│상태  │ │
│ │────────┼───────┼────────┼────┼────┼───┼────┼────┼────│ │
│ │SO240101│삼성전자│PCB-MB-001│5,000│3,000│2,000│02-15│D-10│생산중│ │
│ │SO240101│삼성전자│PCB-PW-001│3,000│3,000│0   │02-15│완료│출하완│ │
│ │SO240102│LG전자 │PCB-MB-002│3,000│0   │3,000│02-20│D-15│확정 │ │
│ │SO240103│현대   │ECU-001   │1,000│0   │1,000│02-28│D-23│생산중│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 납기 현황 ───────────────────────────────────────────────┐ │
│ │ 🔴 납기 지연: 2건 (250,000,000원)                           │ │
│ │ 🟡 납기 임박 (D-7): 5건 (180,000,000원)                     │ │
│ │ 🟢 정상 진행: 38건 (420,000,000원)                          │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3.4 ERP-SD-004: 출하지시 관리

#### 3.4.1 화면 목적
- 수주 건에 대한 출하지시서 생성 및 관리

#### 3.4.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 출하지시 관리                          [신규] [저장] [지시] [인쇄]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 출하대기 수주 ───────────────────────────────────────────┐ │
│ │ 수주번호│고객사   │품목      │수주량│출하가능│납기 │선택│ │
│ │────────┼───────┼────────┼────┼──────┼────┼──│ │
│ │SO240101│삼성전자│PCB-MB-001│5,000│3,700  │02-15│[▣]│ │
│ │SO240102│LG전자 │PCB-MB-002│3,000│2,000  │02-20│[□]│ │
│ │SO240103│현대   │ECU-001   │1,000│1,000  │02-28│[□]│ │
│ │                                    [선택품목 출하지시 생성] │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 출하지시서 ──────────────────────────────────────────────┐ │
│ │ 출하지시번호: [DO24010001  ]  지시일자: [2024-02-10]        │ │
│ │ 고객사: [삼성전자(주)     ]  납품장소: [수원사업장]         │ │
│ │ 출하예정일: [2024-02-12   ]  운송: [자가운송    ▼]         │ │
│ │                                                             │ │
│ │ ┌─ 출하품목 ─────────────────────────────────────────────┐│ │
│ │ │ 수주번호│품목코드   │품명        │수주량│출하지시량│창고 ││ │
│ │ │────────┼──────────┼───────────┼────┼────────┼───││ │
│ │ │SO240101│PCB-MB-001│스마트폰메인 │5,000│[3,000  ]│완제품창고││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │ 비고: [긴급 출하 요청 - 고객 요청에 의한 분할 출하       ] │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.4.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| do_no | VARCHAR(12) | Y | 출하지시번호 (DO+년월+일련번호) |
| do_date | DATE | Y | 지시일자 |
| customer_code | VARCHAR(10) | Y | 고객사 코드 |
| delivery_date | DATE | Y | 출하예정일 |
| delivery_loc | VARCHAR(100) | N | 납품장소 |
| transport_type | VARCHAR(20) | Y | 운송유형 (자가/택배/화물) |
| status | VARCHAR(10) | Y | 상태 (작성/지시/출하중/완료/취소) |

#### 3.4.4 비즈니스 로직
```
1. 출하지시 생성
   - 출하가능수량 확인 (재고 + 생산완료 - 예약)
   - 출하지시수량 ≤ 출하가능수량 검증
   - 복수 수주 건 통합 출하 가능

2. 출하 지시
   - 상태 → '지시'
   - 창고에 피킹 지시 발생
   - 출하예정 재고 예약

3. 분할 출하
   - 수주잔량 한도 내 분할 출하 가능
   - 출하 시마다 수주 잔량 차감
```

---

### 3.5 ERP-SD-005: 출하처리

#### 3.5.1 화면 목적
- 출하 실행 및 확정 처리

#### 3.5.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 출하처리                               [신규] [저장] [출하확정]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 출하지시 조회 ───────────────────────────────────────────┐ │
│ │ 출하지시번호: [DO24010001 🔍]  고객사: 삼성전자(주)         │ │
│ │ 지시일자: 2024-02-10          출하예정일: 2024-02-12       │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 출하 정보 ───────────────────────────────────────────────┐ │
│ │ 출하번호: [SH24010001   ]  출하일자: [2024-02-12]          │ │
│ │ 출하창고: [완제품창고  ▼]  출하담당: [최물류     ]          │ │
│ │ 운송장번호: [1234-5678-901]  차량번호: [56가7890   ]        │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 출하 품목 ───────────────────────────────────────────────┐ │
│ │ No│품목코드   │품명        │지시량│출하량│LOT번호    │비고│ │
│ │───┼──────────┼───────────┼─────┼─────┼──────────┼──│ │
│ │ 1 │PCB-MB-001│스마트폰메인│3,000 │[3,000]│PR24020101│   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 거래명세서 정보 ─────────────────────────────────────────┐ │
│ │ 거래명세서번호: [2024-0212-001]  발행여부: [▣발행]         │ │
│ │ 수령인: [삼성전자 자재팀 김수령]  연락처: [010-1234-5678]   │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.5.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| ship_no | VARCHAR(12) | Y | 출하번호 (SH+년월+일련번호) |
| ship_date | DATE | Y | 출하일자 |
| do_no | VARCHAR(12) | Y | 출하지시번호 |
| warehouse_code | VARCHAR(10) | Y | 출하창고 |
| shipper | VARCHAR(50) | Y | 출하담당자 |
| tracking_no | VARCHAR(30) | N | 운송장번호 |
| vehicle_no | VARCHAR(20) | N | 차량번호 |
| status | VARCHAR(10) | Y | 상태 (출하중/확정/반품) |

#### 3.5.4 비즈니스 로직
```
1. 출하 등록
   - 출하지시 기준 출하 수량 입력
   - LOT번호 필수 입력 (추적성 확보)
   - 출하수량 ≤ 지시수량 검증

2. 출하 확정
   - 재고 차감 (erp_inventory_stock 감소)
   - 수주 상태 업데이트 (부분출하/출하완료)
   - 매출전표 자동 생성 (선택)
   - MES 출하 정보 연동

3. LOT 추적
   - 생산 LOT → 출하 LOT 연결
   - 품질 이슈 시 역추적 가능
```

---

### 3.6 ERP-SD-006: 매출전표 관리

#### 3.6.1 화면 목적
- 출하 확정 건에 대한 매출 전표 생성 및 관리

#### 3.6.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 매출전표 관리                          [신규] [저장] [전기] [삭제]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 전표일자: [2024-01-01] ~ [2024-01-31]  상태: [전체    ▼]  │ │
│ │ 고객사: [                 ]  전표번호: [         ]  [검색] │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 매출전표 목록 ───────────────────────────────────────────┐ │
│ │ 전표번호    │전표일자│고객사    │공급가액  │VAT     │합계     │상태│ │
│ │─────────────┼───────┼────────┼────────┼───────┼───────┼──│ │
│ │ SI24010001  │2024-02│삼성전자 │36,000,000│3,600,000│39,600,000│전기│ │
│ │ SI24010002  │2024-02│LG전자  │15,000,000│1,500,000│16,500,000│작성│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 매출전표 상세 ───────────────────────────────────────────┐ │
│ │ 전표번호: [SI24010001   ]  전표일자: [2024-02-12]          │ │
│ │ 고객사: [삼성전자(주)    ]  사업자번호: [123-45-67890]      │ │
│ │ 세금계산서: [2024-02-0001]  발행일자: [2024-02-12]          │ │
│ │                                                             │ │
│ │ ┌─ 전표 품목 ────────────────────────────────────────────┐│ │
│ │ │ 출하번호  │품목코드   │품명        │수량 │단가  │공급가액  ││ │
│ │ │──────────┼──────────┼───────────┼────┼─────┼────────││ │
│ │ │ SH24010001│PCB-MB-001│스마트폰메인│3,000│12,000│36,000,000││ │
│ │ │───────────┼──────────┼───────────┼────┼─────┼────────││ │
│ │ │                                   공급가액: │36,000,000││ │
│ │ │                                   VAT:     │3,600,000 ││ │
│ │ │                                   합계:    │39,600,000││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │ 결제예정일: [2024-03-31]  결제조건: [월말30일▼]             │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.6.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| si_no | VARCHAR(12) | Y | 매출전표번호 (SI+년월+일련번호) |
| si_date | DATE | Y | 전표일자 |
| customer_code | VARCHAR(10) | Y | 고객사 코드 |
| tax_invoice_no | VARCHAR(30) | N | 세금계산서 번호 |
| tax_invoice_date | DATE | N | 세금계산서 발행일 |
| supply_amount | DECIMAL(15,2) | Y | 공급가액 |
| vat_amount | DECIMAL(15,2) | Y | 부가세 |
| total_amount | DECIMAL(15,2) | Y | 합계금액 |
| due_date | DATE | Y | 결제예정일 |
| status | VARCHAR(10) | Y | 상태 (작성/전기/수금완료) |

#### 3.6.4 비즈니스 로직
```
1. 매출전표 생성
   - 출하 확정 시 자동 생성 (선택)
   - 복수 출하 건 합산 가능

2. 전기 처리
   - 회계 전표 자동 생성
     차변: 외상매출금(자산) / 대변: 매출(수익)
     차변: 외상매출금 / 대변: 부가세예수금(부채)
   - 상태 → '전기'
   - 채권 등록

3. 세금계산서 발행
   - 전자세금계산서 연동 (선택)
   - 발행일, 발행번호 기록
```

---

### 3.7 ERP-SD-007: 채권현황 조회

#### 3.7.1 화면 목적
- 거래처별 채권 현황 조회 및 연체 관리

#### 3.7.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 채권현황 조회                                    [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 기준일자: [2024-02-29]                                      │ │
│ │ 고객사: [            ▼]  연체포함: [▣]              [검색]  │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 채권 요약 ───────────────────────────────────────────────┐ │
│ │ 총 채권잔액: 1,285,000,000원  │  연체금액: 185,000,000원   │ │
│ │ 거래처수: 45개사             │  연체율: 14.4%              │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 거래처별 채권현황 ───────────────────────────────────────┐ │
│ │ 고객사    │매출금액    │수금액     │채권잔액   │연체금액  │연체율│ │
│ │──────────┼──────────┼─────────┼─────────┼────────┼────│ │
│ │ 삼성전자  │500,000,000│450,000,000│50,000,000 │0        │0%  │ │
│ │ LG전자   │350,000,000│280,000,000│70,000,000 │20,000,000│29% │ │
│ │ 현대모비스│280,000,000│200,000,000│80,000,000 │35,000,000│44% │ │
│ │ SK하이닉스│200,000,000│180,000,000│20,000,000 │0        │0%  │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 연체 경과 분석 ──────────────────────────────────────────┐ │
│ │ 구분      │금액        │비율  │건수│                       │ │
│ │──────────┼──────────┼─────┼───┤                       │ │
│ │ 미도래    │950,000,000 │73.9%│120│ ████████████████████  │ │
│ │ 1-30일   │150,000,000 │11.7%│25 │ █████                 │ │
│ │ 31-60일  │100,000,000 │7.8% │15 │ ████                  │ │
│ │ 61-90일  │50,000,000  │3.9% │8  │ ██                    │ │
│ │ 90일초과 │35,000,000  │2.7% │5  │ █                     │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3.8 ERP-SD-008: 수금처리

#### 3.8.1 화면 목적
- 채권에 대한 수금 등록 및 관리

#### 3.8.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 수금처리                                      [신규] [저장] [삭제]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 수금일자: [2024-01-01] ~ [2024-02-29]                       │ │
│ │ 고객사: [            ▼]  수금번호: [         ]  [검색]     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수금 내역 ───────────────────────────────────────────────┐ │
│ │ 수금번호    │수금일자│고객사    │수금유형│금액       │상태│ │
│ │─────────────┼───────┼────────┼──────┼─────────┼──│ │
│ │ RC24020001  │02-15  │삼성전자 │계좌이체│50,000,000 │확정│ │
│ │ RC24020002  │02-20  │LG전자  │어음   │30,000,000 │대기│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 수금 등록 ───────────────────────────────────────────────┐ │
│ │ 수금번호: [RC24020003   ]  수금일자: [2024-02-25]          │ │
│ │ 고객사: [현대모비스    ▼]  수금유형: [계좌이체  ▼]         │ │
│ │ 수금금액: [35,000,000    ]  입금계좌: [기업은행1234▼]       │ │
│ │                                                             │ │
│ │ ┌─ 채권 대사 ────────────────────────────────────────────┐│ │
│ │ │ 매출전표  │전표일자│채권잔액   │금회수금   │잔액     │선택││ │
│ │ │──────────┼───────┼─────────┼─────────┼───────┼──││ │
│ │ │ SI24010005│01-25  │50,000,000 │[35,000,000]│15,000,000│[▣]││ │
│ │ │ SI24010008│02-05  │30,000,000 │[         ]│30,000,000│[□]││ │
│ │ │─────────────────────────────────────────────────────────││ │
│ │ │               수금총액: 35,000,000원                     ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │ 비고: [2024년 1월분 일부 수금                            ] │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.8.3 데이터 항목

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| receipt_no | VARCHAR(12) | Y | 수금번호 (RC+년월+일련번호) |
| receipt_date | DATE | Y | 수금일자 |
| customer_code | VARCHAR(10) | Y | 고객사 코드 |
| receipt_type | VARCHAR(20) | Y | 수금유형 (현금/계좌이체/어음/카드) |
| amount | DECIMAL(15,2) | Y | 수금금액 |
| bank_account | VARCHAR(30) | N | 입금계좌 |
| status | VARCHAR(10) | Y | 상태 (대기/확정/취소) |

---

### 3.9 ERP-SD-009: 영업실적 분석

#### 3.9.1 화면 목적
- 영업 성과 분석 및 리포트 제공

#### 3.9.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 영업실적 분석                                    [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 분석조건 ─────────────────────────────────────────────────┐ │
│ │ 분석기간: [2024-01-01] ~ [2024-03-31]                       │ │
│ │ 분석유형: [○월별 ●담당자별 ○고객별 ○제품별]      [분석]   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 실적 요약 ───────────────────────────────────────────────┐ │
│ │ 총 수주금액: 2,850,000,000원 │ 총 매출금액: 2,450,000,000원│ │
│ │ 수주건수: 156건             │ 수금률: 85.5%               │ │
│ │ 전년동기비: +12.5%          │ 목표달성률: 92.3%           │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 담당자별 실적 ───────────────────────────────────────────┐ │
│ │ 순위│담당자│수주금액    │매출금액    │목표│달성률│전년비│ │
│ │────┼─────┼──────────┼──────────┼───┼─────┼────│ │
│ │ 1  │김영업│850,000,000│780,000,000│800M│97.5%│+15%│ │
│ │ 2  │이영업│720,000,000│650,000,000│700M│92.9%│+8% │ │
│ │ 3  │박영업│580,000,000│520,000,000│600M│86.7%│+5% │ │
│ │ 4  │최영업│450,000,000│350,000,000│500M│70.0%│-3% │ │
│ │ 5  │기타 │250,000,000│150,000,000│400M│37.5%│-10%│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 월별 추이 (차트) ────────────────────────────────────────┐ │
│ │     1000M ┤                              ┌───┐             │ │
│ │      800M ┤              ┌───┐ ┌───┐     │   │             │ │
│ │      600M ┤    ┌───┐     │   │ │   │     │   │             │ │
│ │      400M ┤    │   │     │   │ │   │     │   │             │ │
│ │      200M ┤    │   │     │   │ │   │     │   │             │ │
│ │        0  ┼────┴───┴─────┴───┴─┴───┴─────┴───┴────        │ │
│ │              1월       2월       3월                        │ │
│ │         ■ 수주  □ 매출  ━ 목표                             │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3.10 ERP-SD-010: 고객 분석

#### 3.10.1 화면 목적
- 고객별 거래 분석 및 VIP 고객 관리

#### 3.10.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 고객 분석                                        [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 분석조건 ─────────────────────────────────────────────────┐ │
│ │ 분석기간: [2024-01-01] ~ [2024-12-31]                       │ │
│ │ 고객등급: [▣전체 ☑VIP ☑일반 ☑신규]                [분석]  │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 고객 포트폴리오 ─────────────────────────────────────────┐ │
│ │ 등급│고객수│매출비중│평균거래액│평균수금기간│                │ │
│ │────┼─────┼──────┼────────┼──────────┤                │ │
│ │ VIP│5    │65%   │520,000,000│25일      │ ████████████████   │ │
│ │ A  │15   │25%   │67,000,000 │32일      │ ██████             │ │
│ │ B  │30   │8%    │10,600,000 │45일      │ ██                 │ │
│ │ C  │95   │2%    │840,000   │60일      │ █                  │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ TOP 10 고객 ─────────────────────────────────────────────┐ │
│ │ 순위│고객사    │등급│매출금액    │비중 │거래품목      │수금율│ │
│ │────┼────────┼───┼──────────┼────┼────────────┼────│ │
│ │ 1  │삼성전자 │VIP│780,000,000│26.0%│스마트폰메인  │98% │ │
│ │ 2  │LG전자  │VIP│520,000,000│17.3%│TV메인/전원  │95% │ │
│ │ 3  │현대모비스│VIP│450,000,000│15.0%│ECU/센서    │92% │ │
│ │ 4  │SK하이닉스│VIP│380,000,000│12.7%│메모리모듈   │99% │ │
│ │ 5  │한화시스템│VIP│300,000,000│10.0%│방산용PCB   │100%│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 고객 상세 (삼성전자) ────────────────────────────────────┐ │
│ │ 거래시작: 2018-03-15  │  누적거래: 15,800,000,000원        │ │
│ │ 주요제품: 스마트폰메인보드, 전원보드, LED드라이버          │ │
│ │ 거래추이:                                                   │ │
│ │   2022: 650,000,000  2023: 720,000,000  2024: 780,000,000   │ │
│ │ 특이사항: 분기별 정기발주, 품질 요구사항 매우 높음         │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 테이블 설계

### 4.1 견적서 (erp_sales_quote)
```sql
CREATE TABLE erp_sales_quote (
    quote_no VARCHAR(12) PRIMARY KEY,
    quote_date DATE NOT NULL,
    customer_code VARCHAR(10) NOT NULL,
    sales_rep VARCHAR(50) NOT NULL,
    valid_until DATE NOT NULL,
    payment_term VARCHAR(20),
    delivery_loc VARCHAR(100),
    status VARCHAR(10) DEFAULT '작성',
    supply_amount DECIMAL(15,2) DEFAULT 0,
    vat_amount DECIMAL(15,2) DEFAULT 0,
    total_amount DECIMAL(15,2) DEFAULT 0,
    remarks VARCHAR(500),
    issued_at TIMESTAMP,
    issued_by VARCHAR(50),
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_code) REFERENCES erp_partner_master(partner_code)
);
```

### 4.2 수주 (erp_sales_order)
```sql
CREATE TABLE erp_sales_order (
    so_no VARCHAR(12) PRIMARY KEY,
    so_date DATE NOT NULL,
    customer_code VARCHAR(10) NOT NULL,
    customer_po VARCHAR(30),
    sales_rep VARCHAR(50) NOT NULL,
    due_date DATE NOT NULL,
    payment_term VARCHAR(20),
    delivery_loc VARCHAR(100),
    status VARCHAR(10) DEFAULT '작성',
    supply_amount DECIMAL(15,2) DEFAULT 0,
    vat_amount DECIMAL(15,2) DEFAULT 0,
    total_amount DECIMAL(15,2) DEFAULT 0,
    quote_no VARCHAR(12),
    confirmed_at TIMESTAMP,
    confirmed_by VARCHAR(50),
    remarks VARCHAR(500),
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_code) REFERENCES erp_partner_master(partner_code),
    FOREIGN KEY (quote_no) REFERENCES erp_sales_quote(quote_no)
);
```

### 4.3 출하지시 (erp_delivery_order)
```sql
CREATE TABLE erp_delivery_order (
    do_no VARCHAR(12) PRIMARY KEY,
    do_date DATE NOT NULL,
    customer_code VARCHAR(10) NOT NULL,
    delivery_date DATE NOT NULL,
    delivery_loc VARCHAR(100),
    transport_type VARCHAR(20),
    status VARCHAR(10) DEFAULT '작성',
    remarks VARCHAR(500),
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_code) REFERENCES erp_partner_master(partner_code)
);
```

### 4.4 출하 (erp_shipment)
```sql
CREATE TABLE erp_shipment (
    ship_no VARCHAR(12) PRIMARY KEY,
    ship_date DATE NOT NULL,
    do_no VARCHAR(12) NOT NULL,
    warehouse_code VARCHAR(10) NOT NULL,
    shipper VARCHAR(50) NOT NULL,
    tracking_no VARCHAR(30),
    vehicle_no VARCHAR(20),
    status VARCHAR(10) DEFAULT '출하중',
    total_amount DECIMAL(15,2) DEFAULT 0,
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (do_no) REFERENCES erp_delivery_order(do_no),
    FOREIGN KEY (warehouse_code) REFERENCES erp_warehouse_master(warehouse_code)
);
```

### 4.5 매출전표 (erp_sales_invoice)
```sql
CREATE TABLE erp_sales_invoice (
    si_no VARCHAR(12) PRIMARY KEY,
    si_date DATE NOT NULL,
    customer_code VARCHAR(10) NOT NULL,
    tax_invoice_no VARCHAR(30),
    tax_invoice_date DATE,
    supply_amount DECIMAL(15,2) NOT NULL,
    vat_amount DECIMAL(15,2) NOT NULL,
    total_amount DECIMAL(15,2) NOT NULL,
    due_date DATE,
    status VARCHAR(10) DEFAULT '작성',
    gl_voucher_no VARCHAR(20),
    posted_at TIMESTAMP,
    balance DECIMAL(15,2),  -- 채권잔액
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_code) REFERENCES erp_partner_master(partner_code)
);
```

### 4.6 수금 (erp_receipt)
```sql
CREATE TABLE erp_receipt (
    receipt_no VARCHAR(12) PRIMARY KEY,
    receipt_date DATE NOT NULL,
    customer_code VARCHAR(10) NOT NULL,
    receipt_type VARCHAR(20) NOT NULL,
    amount DECIMAL(15,2) NOT NULL,
    bank_account VARCHAR(30),
    status VARCHAR(10) DEFAULT '대기',
    remarks VARCHAR(500),
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_code) REFERENCES erp_partner_master(partner_code)
);
```

---

## 5. API 설계

### 5.1 견적 API
```
POST   /api/erp/sales-quote              견적서 등록
GET    /api/erp/sales-quote              견적서 목록 조회
GET    /api/erp/sales-quote/{quote_no}   견적서 상세 조회
PUT    /api/erp/sales-quote/{quote_no}   견적서 수정
POST   /api/erp/sales-quote/{quote_no}/issue    견적 발행
POST   /api/erp/sales-quote/{quote_no}/convert  수주 전환
```

### 5.2 수주 API
```
POST   /api/erp/sales-order              수주 등록
GET    /api/erp/sales-order              수주 목록 조회
GET    /api/erp/sales-order/{so_no}      수주 상세 조회
PUT    /api/erp/sales-order/{so_no}      수주 수정
POST   /api/erp/sales-order/{so_no}/confirm    수주 확정
DELETE /api/erp/sales-order/{so_no}      수주 취소
GET    /api/erp/sales-order/status       수주현황 조회
```

### 5.3 출하 API
```
POST   /api/erp/delivery-order           출하지시 등록
GET    /api/erp/delivery-order           출하지시 목록 조회
POST   /api/erp/delivery-order/{do_no}/issue   출하지시 발행
POST   /api/erp/shipment                 출하 등록
GET    /api/erp/shipment                 출하 목록 조회
POST   /api/erp/shipment/{ship_no}/confirm     출하 확정
```

### 5.4 매출/수금 API
```
POST   /api/erp/sales-invoice            매출전표 등록
GET    /api/erp/sales-invoice            매출전표 목록 조회
POST   /api/erp/sales-invoice/{si_no}/post     전기 처리
GET    /api/erp/receivable               채권현황 조회
POST   /api/erp/receipt                  수금 등록
GET    /api/erp/receipt                  수금 목록 조회
POST   /api/erp/receipt/{receipt_no}/confirm   수금 확정
```

### 5.5 분석 API
```
GET    /api/erp/sales/analysis/performance     영업실적 분석
GET    /api/erp/sales/analysis/customer        고객 분석
GET    /api/erp/sales/analysis/trend           매출 추이 분석
```

---

## 6. MES 연동

### 6.1 수주 → 생산계획 연동
```
수주 확정 시:
1. erp_mes_work_order_if 테이블에 작업지시 요청 등록
2. MES에서 해당 데이터 조회하여 생산계획 수립
3. 생산 진행상황 역연동 (생산현황 조회)
```

### 6.2 출하 → 자재이동 연동
```
출하 확정 시:
1. mes_erp_goods_movement_if 테이블에 출하 기록
   - movement_type: 'SH' (출하)
   - item_code, qty, lot_no, warehouse_code
2. LOT 추적 정보 연동 (품질 이슈 대응)
```

---

## 7. 초기 데이터

### 7.1 영업 상태 코드
| 상태 | 설명 |
|------|------|
| 작성 | 문서 작성 중 |
| 발행 | 견적 발행 완료 |
| 수주 | 견적 → 수주 전환 |
| 만료 | 견적 유효기간 경과 |
| 확정 | 수주 확정 |
| 생산중 | 생산 진행 중 |
| 출하대기 | 생산완료, 출하 대기 |
| 부분출하 | 일부 출하 완료 |
| 출하완료 | 전량 출하 완료 |
| 취소 | 취소 |

### 7.2 고객 등급 기준
| 등급 | 연간매출 기준 | 혜택 |
|------|-------------|------|
| VIP | 5억원 이상 | 전담 영업, 우선납기 |
| A | 1억~5억원 | 분기별 미팅, 할인단가 |
| B | 3천만~1억원 | 정기 연락 |
| C | 3천만원 미만 | 일반 관리 |

### 7.3 수금 유형 코드
| 코드 | 명칭 |
|------|------|
| CASH | 현금 |
| TRANSFER | 계좌이체 |
| CHECK | 수표 |
| NOTE | 어음 |
| CARD | 카드 |

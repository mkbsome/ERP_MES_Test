# ERP 회계/인사/시스템 모듈 기능정의서

## 1. 모듈 개요

### 1.1 회계관리 모듈 (ERP-FI)
| 항목 | 내용 |
|------|------|
| 모듈 ID | ERP-FI |
| 모듈명 | 회계관리 (Finance) |
| 화면 수 | 6개 |
| 목적 | 전표 관리, 장부 조회, 결산 및 재무제표 |

### 1.2 원가관리 모듈 (ERP-CO)
| 항목 | 내용 |
|------|------|
| 모듈 ID | ERP-CO |
| 모듈명 | 원가관리 (Controlling) |
| 화면 수 | 4개 |
| 목적 | 제품원가 계산, 원가 분석 |

### 1.3 인사급여 모듈 (ERP-HR)
| 항목 | 내용 |
|------|------|
| 모듈 ID | ERP-HR |
| 모듈명 | 인사급여 (Human Resources) |
| 화면 수 | 6개 |
| 목적 | 인사정보, 근태, 급여 관리 |

### 1.4 시스템관리 모듈 (ERP-SYS)
| 항목 | 내용 |
|------|------|
| 모듈 ID | ERP-SYS |
| 모듈명 | 시스템관리 (System) |
| 화면 수 | 4개 |
| 목적 | 사용자, 권한, 시스템 설정 관리 |

---

## 2. 화면 목록

### 2.1 회계관리 (ERP-FI)
| 화면 ID | 화면명 | 우선순위 | 설명 |
|---------|--------|----------|------|
| ERP-FI-001 | 전표 입력 | P1 | 회계전표 등록/수정/승인 |
| ERP-FI-002 | 전표 조회 | P1 | 전표 검색/조회 |
| ERP-FI-003 | 총계정원장 | P1 | 계정별 장부 조회 |
| ERP-FI-004 | 매입매출장 | P1 | 매입/매출 내역 조회 |
| ERP-FI-005 | 재무제표 | P2 | 재무상태표, 손익계산서 |
| ERP-FI-006 | 결산 관리 | P2 | 월말/연말 결산 처리 |

### 2.2 원가관리 (ERP-CO)
| 화면 ID | 화면명 | 우선순위 | 설명 |
|---------|--------|----------|------|
| ERP-CO-001 | 표준원가 관리 | P1 | 제품별 표준원가 설정 |
| ERP-CO-002 | 실제원가 계산 | P1 | 제조오더별 실제원가 |
| ERP-CO-003 | 원가차이 분석 | P1 | 표준-실제 차이 분석 |
| ERP-CO-004 | 원가 리포트 | P2 | 원가 분석 보고서 |

### 2.3 인사급여 (ERP-HR)
| 화면 ID | 화면명 | 우선순위 | 설명 |
|---------|--------|----------|------|
| ERP-HR-001 | 사원정보 관리 | P1 | 사원 마스터 관리 |
| ERP-HR-002 | 조직도 관리 | P1 | 부서/직급 구조 관리 |
| ERP-HR-003 | 근태 관리 | P1 | 출근/퇴근/휴가 관리 |
| ERP-HR-004 | 급여 계산 | P1 | 월급여 계산/지급 |
| ERP-HR-005 | 급여명세서 | P2 | 급여명세서 조회/출력 |
| ERP-HR-006 | 인사통계 | P2 | 인사 현황 분석 |

### 2.4 시스템관리 (ERP-SYS)
| 화면 ID | 화면명 | 우선순위 | 설명 |
|---------|--------|----------|------|
| ERP-SYS-001 | 사용자 관리 | P1 | ERP 사용자 계정 관리 |
| ERP-SYS-002 | 권한 관리 | P1 | 메뉴/기능 권한 설정 |
| ERP-SYS-003 | 시스템 설정 | P1 | 회사 정보/환경 설정 |
| ERP-SYS-004 | 로그 조회 | P2 | 접속/작업 로그 조회 |

---

## 3. 회계관리 상세 정의

### 3.1 ERP-FI-001: 전표 입력

#### 3.1.1 화면 목적
- 회계전표 등록, 수정, 승인 처리

#### 3.1.2 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 전표 입력                              [신규] [저장] [승인] [삭제]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 전표 정보 ───────────────────────────────────────────────┐ │
│ │ 전표번호: [V24020001    ]  전표일자: [2024-02-06]          │ │
│ │ 전표유형: [일반전표    ▼]  상태: [작성]                    │ │
│ │ 적요: [2월 6일 일반경비 지출                              ]│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 전표 분개 ───────────────────────────────────────────────┐ │
│ │ No│차대│계정코드 │계정명      │적요        │차변금액│대변금액│ │
│ │───┼───┼────────┼───────────┼───────────┼───────┼───────│ │
│ │ 1 │차 │811100  │복리후생비  │점심식대    │350,000│       │ │
│ │ 2 │차 │811200  │여비교통비  │출장비      │150,000│       │ │
│ │ 3 │대 │110100  │보통예금    │기업은행    │       │500,000│ │
│ │───┼───┼────────┼───────────┼───────────┼───────┼───────│ │
│ │                              합계:     │500,000│500,000│ │
│ │                              차이:     │      0│       │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                      [분개추가] [분개삭제]      │
│                                                                 │
│ ┌─ 증빙 첨부 ───────────────────────────────────────────────┐ │
│ │ [영수증_001.jpg 🔗] [카드매출전표.pdf 🔗]       [파일추가]   │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.1.3 데이터 항목

**전표 헤더 (erp_gl_voucher)**

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| voucher_no | VARCHAR(12) | Y | 전표번호 (V+년월+일련번호) |
| voucher_date | DATE | Y | 전표일자 |
| voucher_type | VARCHAR(10) | Y | 전표유형 (일반/매입/매출/급여) |
| description | VARCHAR(200) | N | 적요 |
| status | VARCHAR(10) | Y | 상태 (작성/승인/전기/취소) |
| total_debit | DECIMAL(15,2) | Y | 차변 합계 |
| total_credit | DECIMAL(15,2) | Y | 대변 합계 |
| source_type | VARCHAR(20) | N | 발생원천 (PI/SI/PR/WO 등) |
| source_no | VARCHAR(20) | N | 원천문서번호 |

**전표 분개 (erp_gl_voucher_line)**

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| voucher_no | VARCHAR(12) | Y | 전표번호 |
| line_no | INT | Y | 순번 |
| dc_type | CHAR(1) | Y | 차대구분 (D/C) |
| account_code | VARCHAR(10) | Y | 계정코드 |
| description | VARCHAR(200) | N | 적요 |
| debit_amount | DECIMAL(15,2) | N | 차변금액 |
| credit_amount | DECIMAL(15,2) | N | 대변금액 |
| cost_center | VARCHAR(10) | N | 코스트센터 |

#### 3.1.4 비즈니스 로직
```
1. 전표 생성
   - 차변 합계 = 대변 합계 검증 (대차평균)
   - 계정코드 유효성 검증
   - 전표번호 자동채번

2. 전표 승인
   - 금액 기준 승인 권한 검증
   - 승인 시 총계정원장 반영
   - 상태 → '승인'

3. 자동 전표
   - 매입전표 → 매입 회계전표 자동 생성
   - 매출전표 → 매출 회계전표 자동 생성
   - 급여계산 → 급여 회계전표 자동 생성
```

---

### 3.2 ERP-FI-003: 총계정원장

#### 3.2.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 총계정원장                                       [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 기간: [2024-02-01] ~ [2024-02-29]                           │ │
│ │ 계정: [110100      🔍] 보통예금                  [조회]     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 계정 정보 ───────────────────────────────────────────────┐ │
│ │ 계정코드: 110100      │  계정명: 보통예금                  │ │
│ │ 전기이월: 125,000,000 │  당월증가: 285,000,000             │ │
│ │ 당월감소: 198,000,000 │  잔액: 212,000,000                 │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 원장 상세 ───────────────────────────────────────────────┐ │
│ │ 일자  │전표번호  │적요          │차변      │대변      │잔액      │ │
│ │──────┼─────────┼─────────────┼─────────┼─────────┼─────────│ │
│ │      │전기이월  │             │         │         │125,000,000│ │
│ │ 02-05│V24020001│매출입금-삼성 │85,000,000│         │210,000,000│ │
│ │ 02-06│V24020002│급여지급      │         │65,000,000│145,000,000│ │
│ │ 02-10│V24020005│매입대금-삼성전│         │45,000,000│100,000,000│ │
│ │ 02-15│V24020008│매출입금-LG   │55,000,000│         │155,000,000│ │
│ │ 02-20│V24020012│운영경비      │         │18,000,000│137,000,000│ │
│ │ 02-25│V24020015│매출입금-현대 │75,000,000│         │212,000,000│ │
│ │──────┴─────────┴─────────────┴─────────┴─────────┴─────────│ │
│ │                           합계: │285,000,000│198,000,000│212,000,000│ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3.3 ERP-FI-005: 재무제표

#### 3.3.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 재무제표                                         [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 조회조건 ─────────────────────────────────────────────────┐ │
│ │ 기준년월: [2024-02 ▼]  제표유형: [●재무상태표 ○손익계산서] │ │
│ │ 비교: [▣ 전년동기]                              [조회]     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 재무상태표 ──────────────────────────────────────────────┐ │
│ │           (주)그린보드 일렉트로닉스                         │ │
│ │           재무상태표 (2024년 2월 29일 현재)                 │ │
│ │                                          (단위: 천원)       │ │
│ │─────────────────────────────────────────────────────────── │ │
│ │ 과목              │ 당기         │ 전기동기    │ 증감       │ │
│ │───────────────────┼─────────────┼────────────┼───────────│ │
│ │ [자산]            │             │            │           │ │
│ │  Ⅰ. 유동자산      │  12,500,000 │ 10,800,000 │ 1,700,000 │ │
│ │   1. 현금및현금성  │   2,120,000 │  1,850,000 │   270,000 │ │
│ │   2. 매출채권      │   4,850,000 │  4,200,000 │   650,000 │ │
│ │   3. 재고자산      │   5,530,000 │  4,750,000 │   780,000 │ │
│ │  Ⅱ. 비유동자산    │  25,000,000 │ 23,500,000 │ 1,500,000 │ │
│ │   1. 유형자산      │  22,000,000 │ 21,000,000 │ 1,000,000 │ │
│ │   2. 무형자산      │   3,000,000 │  2,500,000 │   500,000 │ │
│ │───────────────────┼─────────────┼────────────┼───────────│ │
│ │ 자산총계          │  37,500,000 │ 34,300,000 │ 3,200,000 │ │
│ │                   │             │            │           │ │
│ │ [부채]            │             │            │           │ │
│ │  Ⅰ. 유동부채      │   8,500,000 │  7,800,000 │   700,000 │ │
│ │  Ⅱ. 비유동부채    │   5,000,000 │  5,500,000 │  -500,000 │ │
│ │───────────────────┼─────────────┼────────────┼───────────│ │
│ │ 부채총계          │  13,500,000 │ 13,300,000 │   200,000 │ │
│ │                   │             │            │           │ │
│ │ [자본]            │             │            │           │ │
│ │  Ⅰ. 자본금        │  10,000,000 │ 10,000,000 │         0 │ │
│ │  Ⅱ. 이익잉여금    │  14,000,000 │ 11,000,000 │ 3,000,000 │ │
│ │───────────────────┼─────────────┼────────────┼───────────│ │
│ │ 자본총계          │  24,000,000 │ 21,000,000 │ 3,000,000 │ │
│ │ 부채와자본총계    │  37,500,000 │ 34,300,000 │ 3,200,000 │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 원가관리 상세 정의

### 4.1 ERP-CO-001: 표준원가 관리

#### 4.1.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 표준원가 관리                                    [저장] [일괄등록]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 제품: [               ]  원가년월: [2024-02 ▼]    [검색]   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 표준원가 목록 ───────────────────────────────────────────┐ │
│ │ 제품코드  │제품명      │재료비│노무비│제조경비│표준원가  │ │
│ │──────────┼───────────┼─────┼─────┼──────┼─────────│ │
│ │PCB-MB-001│스마트폰메인 │8,500│1,200│1,800  │11,500   │ │
│ │PCB-PW-001│전원보드    │3,200│800  │1,000  │5,000    │ │
│ │PCB-LED-01│LED드라이버 │2,800│700  │900   │4,400    │ │
│ │ECU-001   │차량ECU     │15,000│2,500│3,500  │21,000   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 표준원가 상세 (PCB-MB-001) ──────────────────────────────┐ │
│ │ 제품명: 스마트폰 메인보드                                   │ │
│ │ 원가년월: 2024-02                                          │ │
│ │                                                             │ │
│ │ ┌─ 재료비 ───────────────────────────────────────────────┐│ │
│ │ │ 자재코드    │자재명      │단위소요│단가│재료비    │비중  ││ │
│ │ │────────────┼───────────┼──────┼───┼────────┼────││ │
│ │ │ RES-0402-10│칩저항 10K │12    │20 │240     │2.8% ││ │
│ │ │ CAP-0603-10│MLCC 10uF  │8     │35 │280     │3.3% ││ │
│ │ │ IC-MCU-32  │MCU STM32  │1     │2,500│2,500   │29.4%││ │
│ │ │ PCB-RAW-001│PCB원판    │1     │3,500│3,500   │41.2%││ │
│ │ │ 기타       │           │      │    │1,980   │23.3%││ │
│ │ │────────────┴───────────┴──────┴───┼────────┼────││ │
│ │ │                           재료비 소계:│8,500   │100% ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │                                                             │ │
│ │ ┌─ 노무비/제조경비 ──────────────────────────────────────┐│ │
│ │ │ 항목        │기준        │단가   │원가    │비고         ││ │
│ │ │────────────┼───────────┼──────┼───────┼────────────││ │
│ │ │ 직접노무비  │0.8시간×표준│1,500 │1,200  │시간당 임율  ││ │
│ │ │ 감가상각비  │라인배부    │-     │800   │설비감가상각 ││ │
│ │ │ 전력비     │kWh×단가   │-     │350   │                ││ │
│ │ │ 간접경비   │배부율적용  │-     │650   │                ││ │
│ │ │────────────┴───────────┴──────┼───────┼────────────││ │
│ │ │                           합계: │3,000  │             ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │                                                             │ │
│ │ ═══════════════════════════════════════════════════════════ │ │
│ │                           표준원가 합계: 11,500원           │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 4.2 ERP-CO-003: 원가차이 분석

#### 4.2.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 원가차이 분석                                    [엑셀] [인쇄]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 분석조건 ─────────────────────────────────────────────────┐ │
│ │ 분석기간: [2024-02-01] ~ [2024-02-29]                       │ │
│ │ 제품: [전체        ▼]  라인: [전체      ▼]        [분석]   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 원가차이 요약 ───────────────────────────────────────────┐ │
│ │ 총 표준원가: 5,575,000,000원  │  총 실제원가: 5,698,500,000원│ │
│ │ 원가차이: +123,500,000원 (불리)│  차이율: +2.2%             │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 제품별 원가차이 ─────────────────────────────────────────┐ │
│ │ 제품코드  │생산량│표준원가  │실제원가  │차이      │차이율│ │
│ │──────────┼─────┼─────────┼─────────┼─────────┼─────│ │
│ │PCB-MB-001│258K │2,967,000K│3,021,500K│+54,500K │+1.8%│ │
│ │PCB-PW-001│132K │660,000K │685,200K │+25,200K │+3.8%│ │
│ │PCB-LED-01│76K  │334,400K │341,000K │+6,600K  │+2.0%│ │
│ │ECU-001   │33K  │693,000K │715,800K │+22,800K │+3.3%│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 원가요소별 차이 분석 (PCB-MB-001) ───────────────────────┐ │
│ │ 원가요소  │표준    │실제    │차이    │원인               │ │
│ │──────────┼───────┼───────┼───────┼─────────────────│ │
│ │ 재료비   │8,500  │8,720  │+220   │MCU 단가 인상 (+8%)│ │
│ │ 노무비   │1,200  │1,180  │-20    │생산성 향상        │ │
│ │ 제조경비 │1,800  │1,810  │+10    │전력비 상승        │ │
│ │──────────┼───────┼───────┼───────┼─────────────────│ │
│ │ 합계     │11,500 │11,710 │+210   │                   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 차이 원인 분석 ──────────────────────────────────────────┐ │
│ │ ┌────────────────┐                                        │ │
│ │ │ 재료비 차이    │ ██████████████████████████ 80.5%      │ │
│ │ │ 제조경비 차이  │ ███████ 18.5%                         │ │
│ │ │ 노무비 차이    │ █ 1.0% (유리)                         │ │
│ │ └────────────────┘                                        │ │
│ │                                                             │ │
│ │ 주요 원인:                                                  │ │
│ │ 1. MCU 부품 단가 인상 (삼성전기 8% 인상)                   │ │
│ │ 2. 환율 상승에 따른 수입부품 원가 상승                     │ │
│ │ 3. 전력요금 인상                                           │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 인사급여 상세 정의

### 5.1 ERP-HR-001: 사원정보 관리

#### 5.1.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 사원정보 관리                                 [신규] [저장] [삭제]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 부서: [전체      ▼]  재직상태: [▣재직 □퇴직]              │ │
│ │ 사번/성명: [               ]                      [검색]   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 사원 목록 ───────────────────────────────────────────────┐ │
│ │ 사번    │성명  │부서    │직급│입사일  │재직상태│연락처     │ │
│ │────────┼─────┼───────┼───┼───────┼──────┼──────────│ │
│ │ E00001 │김철수│경영지원│부장│2010-03│재직   │010-1234-5678│ │
│ │ E00002 │이영희│생산팀 │과장│2015-05│재직   │010-2345-6789│ │
│ │ E00003 │박민수│품질팀 │대리│2018-09│재직   │010-3456-7890│ │
│ │ E00004 │최지영│영업팀 │사원│2022-03│재직   │010-4567-8901│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 사원 상세정보 ───────────────────────────────────────────┐ │
│ │ [기본정보]  [인사정보]  [급여정보]  [학력/경력]            │ │
│ │                                                             │ │
│ │ ◆ 기본정보                                                 │ │
│ │ ┌───────────────────────────────────────────────────────┐ │ │
│ │ │ 사번: [E00002     ]  성명: [이영희     ]              │ │ │
│ │ │ 영문명: [Lee Young-hee]  한자명: [李英姬    ]          │ │ │
│ │ │ 주민번호: [850515-2******]  성별: [여]                │ │ │
│ │ │ 생년월일: [1985-05-15]  연락처: [010-2345-6789]       │ │ │
│ │ │ 이메일: [yhlee@greenboard.co.kr]                      │ │ │
│ │ │ 주소: [서울시 강남구 테헤란로 123, 101동 502호      ] │ │ │
│ │ │ 비상연락: [부: 010-9876-5432]                         │ │ │
│ │ └───────────────────────────────────────────────────────┘ │ │
│ │                                                             │ │
│ │ ◆ 인사정보                                                 │ │
│ │ ┌───────────────────────────────────────────────────────┐ │ │
│ │ │ 입사일자: [2015-05-04]  재직상태: [재직    ▼]         │ │ │
│ │ │ 부서: [생산팀     ▼]  직급: [과장    ▼]              │ │ │
│ │ │ 직책: [생산관리   ▼]  고용형태: [정규직  ▼]          │ │ │
│ │ │ 근무지: [본사공장  ▼]                                 │ │ │
│ │ └───────────────────────────────────────────────────────┘ │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 5.2 ERP-HR-003: 근태 관리

#### 5.2.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 근태 관리                                    [저장] [휴가신청]   │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 기간: [2024-02-01] ~ [2024-02-29]  부서: [전체      ▼]     │ │
│ │ 사원: [               ]                           [검색]   │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 근태 현황 요약 ──────────────────────────────────────────┐ │
│ │ 총 인원: 350명  │  출근: 325명  │  휴가: 15명  │  결근: 10명│ │
│ │ 지각: 5명       │  조퇴: 3명    │  야근: 45명               │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 사원별 근태 ─────────────────────────────────────────────┐ │
│ │ 사번  │성명 │01│02│03│04│05│06│07│...│28│29│출근│휴가│결근│ │
│ │──────┼────┼──┼──┼──┼──┼──┼──┼──┼───┼──┼──┼───┼───┼───│ │
│ │E00001│김철수│○│○│○│○│○│휴│휴│...│○│○│18│2 │0 │ │
│ │E00002│이영희│○│○│지│○│○│휴│휴│...│○│○│17│2 │0 │ │
│ │E00003│박민수│○│○│○│연│연│휴│휴│...│○│○│16│4 │0 │ │
│ │E00004│최지영│결│○│○│○│○│휴│휴│...│○│○│17│2 │1 │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 개인 근태 상세 (E00002 이영희) ──────────────────────────┐ │
│ │ 일자    │요일│출근시간│퇴근시간│근무시간│상태│비고       │ │
│ │────────┼───┼───────┼───────┼───────┼───┼──────────│ │
│ │ 02-01  │목 │08:52  │18:35  │8:43   │정상│            │ │
│ │ 02-02  │금 │08:45  │19:20  │9:35   │야근│잔업 1시간  │ │
│ │ 02-03  │토 │09:15  │-     │-      │지각│9시 출근(15분)│ │
│ │ 02-04  │일 │08:30  │18:15  │8:45   │정상│            │ │
│ │ 02-05  │월 │08:40  │18:10  │8:30   │정상│            │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ 범례: ○정상 ●야근 지=지각 조=조퇴 휴=주휴 연=연차 병=병가 결=결근 │
└─────────────────────────────────────────────────────────────────┘
```

---

### 5.3 ERP-HR-004: 급여 계산

#### 5.3.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 급여 계산                              [급여계산] [확정] [지급]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 급여기준 ─────────────────────────────────────────────────┐ │
│ │ 급여년월: [2024-02 ▼]  지급일: [2024-02-25]               │ │
│ │ 상태: [계산완료]  대상인원: [345명]  총지급액: [1,258,500,000]│
│ │                                              [급여계산]     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 급여 목록 ───────────────────────────────────────────────┐ │
│ │ 사번  │성명 │부서  │기본급  │수당   │공제   │실지급액 │상태│ │
│ │──────┼────┼─────┼──────┼──────┼──────┼────────┼──│ │
│ │E00001│김철수│경영지원│5,500,000│850,000│1,285,000│5,065,000│확정│ │
│ │E00002│이영희│생산팀│4,200,000│680,000│980,000│3,900,000│확정│ │
│ │E00003│박민수│품질팀│3,500,000│520,000│810,000│3,210,000│계산│ │
│ │E00004│최지영│영업팀│2,800,000│450,000│650,000│2,600,000│계산│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 급여 상세 (E00002 이영희) ───────────────────────────────┐ │
│ │ ◆ 지급내역                    │ ◆ 공제내역                │ │
│ │ ┌───────────────────────┐    │ ┌───────────────────────┐│ │
│ │ │ 항목      │금액       │    │ │ 항목      │금액       ││ │
│ │ │───────────┼──────────│    │ │───────────┼──────────││ │
│ │ │ 기본급    │4,200,000 │    │ │ 국민연금  │189,000   ││ │
│ │ │ 직책수당  │200,000   │    │ │ 건강보험  │147,000   ││ │
│ │ │ 식대      │150,000   │    │ │ 장기요양  │12,000    ││ │
│ │ │ 교통비    │100,000   │    │ │ 고용보험  │34,000    ││ │
│ │ │ 야근수당  │180,000   │    │ │ 소득세    │468,000   ││ │
│ │ │ 휴일근무  │50,000    │    │ │ 지방소득세│46,800    ││ │
│ │ │           │          │    │ │ 기타공제  │83,200    ││ │
│ │ │───────────┼──────────│    │ │───────────┼──────────││ │
│ │ │ 지급합계  │4,880,000 │    │ │ 공제합계  │980,000   ││ │
│ │ └───────────────────────┘    │ └───────────────────────┘│ │
│ │                                                             │ │
│ │ ═══════════════════════════════════════════════════════════ │ │
│ │                              실지급액: 3,900,000원          │ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 시스템관리 상세 정의

### 6.1 ERP-SYS-001: 사용자 관리

#### 6.1.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 사용자 관리                                   [신규] [저장] [삭제]│
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 검색조건 ─────────────────────────────────────────────────┐ │
│ │ 사용자ID: [            ]  상태: [▣활성 □비활성]   [검색]  │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 사용자 목록 ─────────────────────────────────────────────┐ │
│ │ 사용자ID │성명  │사번  │부서    │역할    │상태 │최종접속  │ │
│ │─────────┼─────┼─────┼───────┼───────┼────┼─────────│ │
│ │ admin   │관리자│-    │시스템  │시스템관리│활성│02-06 14:35│ │
│ │ chulsu  │김철수│E00001│경영지원│일반사용자│활성│02-06 09:12│ │
│ │ younghee│이영희│E00002│생산팀 │생산관리 │활성│02-06 08:45│ │
│ │ minsu   │박민수│E00003│품질팀 │품질관리 │활성│02-05 17:30│ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 사용자 상세 ─────────────────────────────────────────────┐ │
│ │ 사용자ID: [younghee   ]  성명: [이영희     ]              │ │
│ │ 사번: [E00002        ]  부서: [생산팀      ▼]             │ │
│ │ 이메일: [yhlee@greenboard.co.kr]                          │ │
│ │ 역할: [생산관리    ▼]  상태: [활성    ▼]                 │ │
│ │                                                             │ │
│ │ 비밀번호: [**********]  [비밀번호 초기화]                  │ │
│ │ 비밀번호 만료: [2024-05-06]  MFA: [▣ 사용]                │ │
│ │                                                             │ │
│ │ ┌─ 접속이력 ─────────────────────────────────────────────┐│ │
│ │ │ 접속일시        │IP주소       │접속방법│결과│         ││ │
│ │ │────────────────┼────────────┼───────┼───┤         ││ │
│ │ │ 02-06 08:45:23 │192.168.1.45│웹     │성공│         ││ │
│ │ │ 02-05 09:02:15 │192.168.1.45│웹     │성공│         ││ │
│ │ │ 02-05 09:00:42 │192.168.1.45│웹     │실패│비밀번호 ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

### 6.2 ERP-SYS-002: 권한 관리

#### 6.2.1 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────────┐
│ 권한 관리                                        [저장] [복사]  │
├─────────────────────────────────────────────────────────────────┤
│ ┌─ 역할 목록 ───────────────────────────────────────────────┐ │
│ │ 역할코드  │역할명      │설명                │사용자수│     │ │
│ │──────────┼───────────┼──────────────────┼───────│     │ │
│ │ ADMIN    │시스템관리  │전체 시스템 관리자  │2      │     │ │
│ │ PROD_MGR │생산관리    │생산/MES 관리자    │15     │     │ │
│ │ QA_MGR   │품질관리    │품질 관리자        │8      │     │ │
│ │ INV_MGR  │재고관리    │재고/자재 관리자   │12     │     │ │
│ │ SALES    │영업담당    │영업 담당자        │25     │     │ │
│ │ USER     │일반사용자  │조회 권한만        │288    │     │ │
│ └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─ 역할별 권한 설정 (PROD_MGR) ─────────────────────────────┐ │
│ │ 역할: 생산관리                                              │ │
│ │                                                             │ │
│ │ ┌─ 메뉴 권한 ────────────────────────────────────────────┐│ │
│ │ │ 모듈       │메뉴              │조회│등록│수정│삭제│승인││ │
│ │ │───────────┼─────────────────┼───┼───┼───┼───┼───││ │
│ │ │ 생산관리   │MPS              │ ▣ │ ▣ │ ▣ │ □ │ ▣ ││ │
│ │ │ 생산관리   │MRP              │ ▣ │ ▣ │ ▣ │ □ │ □ ││ │
│ │ │ 생산관리   │제조오더         │ ▣ │ ▣ │ ▣ │ □ │ ▣ ││ │
│ │ │ 생산관리   │작업지시         │ ▣ │ ▣ │ ▣ │ □ │ ▣ ││ │
│ │ │ 재고관리   │재고현황         │ ▣ │ □ │ □ │ □ │ □ ││ │
│ │ │ 재고관리   │재고이동         │ ▣ │ ▣ │ □ │ □ │ □ ││ │
│ │ │ 품질관리   │품질검사         │ ▣ │ □ │ □ │ □ │ □ ││ │
│ │ │ 영업관리   │수주현황         │ ▣ │ □ │ □ │ □ │ □ ││ │
│ │ │ 구매관리   │발주현황         │ ▣ │ □ │ □ │ □ │ □ ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ │                                                             │ │
│ │ ┌─ 기능 권한 ────────────────────────────────────────────┐│ │
│ │ │ [▣] 생산계획 수립     [▣] 작업지시 발행              ││ │
│ │ │ [▣] 생산실적 확정     [▣] MES 연동                   ││ │
│ │ │ [□] 마스터데이터 수정 [□] 시스템 설정 변경           ││ │
│ │ └─────────────────────────────────────────────────────────┘│ │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 테이블 설계

### 7.1 회계 테이블

```sql
-- 전표 헤더
CREATE TABLE erp_gl_voucher (
    voucher_no VARCHAR(12) PRIMARY KEY,
    voucher_date DATE NOT NULL,
    voucher_type VARCHAR(10) NOT NULL,
    description VARCHAR(200),
    status VARCHAR(10) DEFAULT '작성',
    total_debit DECIMAL(15,2) NOT NULL,
    total_credit DECIMAL(15,2) NOT NULL,
    source_type VARCHAR(20),
    source_no VARCHAR(20),
    approved_by VARCHAR(50),
    approved_at TIMESTAMP,
    posted_at TIMESTAMP,
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 전표 분개
CREATE TABLE erp_gl_voucher_line (
    voucher_no VARCHAR(12) NOT NULL,
    line_no INT NOT NULL,
    dc_type CHAR(1) NOT NULL,
    account_code VARCHAR(10) NOT NULL,
    description VARCHAR(200),
    debit_amount DECIMAL(15,2) DEFAULT 0,
    credit_amount DECIMAL(15,2) DEFAULT 0,
    cost_center VARCHAR(10),
    PRIMARY KEY (voucher_no, line_no),
    FOREIGN KEY (voucher_no) REFERENCES erp_gl_voucher(voucher_no)
);

-- 계정과목
CREATE TABLE erp_chart_of_account (
    account_code VARCHAR(10) PRIMARY KEY,
    account_name VARCHAR(100) NOT NULL,
    account_type VARCHAR(20) NOT NULL,  -- 자산/부채/자본/수익/비용
    parent_code VARCHAR(10),
    level_no INT,
    is_active CHAR(1) DEFAULT 'Y',
    dc_type CHAR(1),  -- 정상잔액 방향 (D/C)
    description VARCHAR(200)
);
```

### 7.2 원가 테이블

```sql
-- 표준원가
CREATE TABLE erp_standard_cost (
    item_code VARCHAR(20) NOT NULL,
    cost_year INT NOT NULL,
    cost_month INT NOT NULL,
    material_cost DECIMAL(15,2) NOT NULL,
    labor_cost DECIMAL(15,2) NOT NULL,
    overhead_cost DECIMAL(15,2) NOT NULL,
    total_cost DECIMAL(15,2) NOT NULL,
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (item_code, cost_year, cost_month),
    FOREIGN KEY (item_code) REFERENCES erp_item_master(item_code)
);

-- 실제원가
CREATE TABLE erp_actual_cost (
    mo_no VARCHAR(12) PRIMARY KEY,
    item_code VARCHAR(20) NOT NULL,
    production_qty INT NOT NULL,
    material_cost DECIMAL(15,2) NOT NULL,
    labor_cost DECIMAL(15,2) NOT NULL,
    overhead_cost DECIMAL(15,2) NOT NULL,
    total_cost DECIMAL(15,2) NOT NULL,
    unit_cost DECIMAL(15,2) NOT NULL,
    calculated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (mo_no) REFERENCES erp_manufacturing_order(mo_no)
);
```

### 7.3 인사 테이블

```sql
-- 사원정보
CREATE TABLE erp_employee (
    emp_no VARCHAR(10) PRIMARY KEY,
    emp_name VARCHAR(50) NOT NULL,
    emp_name_en VARCHAR(100),
    ssn VARCHAR(14),
    gender CHAR(1),
    birth_date DATE,
    phone VARCHAR(20),
    email VARCHAR(100),
    address VARCHAR(200),
    emergency_contact VARCHAR(50),
    hire_date DATE NOT NULL,
    resign_date DATE,
    dept_code VARCHAR(10) NOT NULL,
    position_code VARCHAR(10) NOT NULL,
    job_title VARCHAR(50),
    employment_type VARCHAR(20),
    work_location VARCHAR(20),
    emp_status VARCHAR(10) DEFAULT '재직',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 근태
CREATE TABLE erp_attendance (
    emp_no VARCHAR(10) NOT NULL,
    work_date DATE NOT NULL,
    check_in TIMESTAMP,
    check_out TIMESTAMP,
    work_hours DECIMAL(4,2),
    overtime_hours DECIMAL(4,2),
    attendance_type VARCHAR(10),  -- 정상/지각/조퇴/결근/휴가
    leave_type VARCHAR(10),       -- 연차/병가/경조 등
    remarks VARCHAR(200),
    PRIMARY KEY (emp_no, work_date),
    FOREIGN KEY (emp_no) REFERENCES erp_employee(emp_no)
);

-- 급여
CREATE TABLE erp_payroll (
    payroll_id SERIAL PRIMARY KEY,
    emp_no VARCHAR(10) NOT NULL,
    pay_year INT NOT NULL,
    pay_month INT NOT NULL,
    base_salary DECIMAL(15,2) NOT NULL,
    allowances DECIMAL(15,2) DEFAULT 0,
    overtime_pay DECIMAL(15,2) DEFAULT 0,
    gross_pay DECIMAL(15,2) NOT NULL,
    national_pension DECIMAL(15,2) DEFAULT 0,
    health_insurance DECIMAL(15,2) DEFAULT 0,
    employment_insurance DECIMAL(15,2) DEFAULT 0,
    income_tax DECIMAL(15,2) DEFAULT 0,
    local_tax DECIMAL(15,2) DEFAULT 0,
    other_deductions DECIMAL(15,2) DEFAULT 0,
    total_deductions DECIMAL(15,2) NOT NULL,
    net_pay DECIMAL(15,2) NOT NULL,
    pay_date DATE,
    status VARCHAR(10) DEFAULT '계산',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (emp_no, pay_year, pay_month),
    FOREIGN KEY (emp_no) REFERENCES erp_employee(emp_no)
);
```

### 7.4 시스템 테이블

```sql
-- 사용자
CREATE TABLE erp_user (
    user_id VARCHAR(50) PRIMARY KEY,
    user_name VARCHAR(100) NOT NULL,
    emp_no VARCHAR(10),
    dept_code VARCHAR(10),
    email VARCHAR(100),
    password_hash VARCHAR(256) NOT NULL,
    password_expire DATE,
    role_code VARCHAR(20) NOT NULL,
    is_active CHAR(1) DEFAULT 'Y',
    mfa_enabled CHAR(1) DEFAULT 'N',
    last_login_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (emp_no) REFERENCES erp_employee(emp_no)
);

-- 역할
CREATE TABLE erp_role (
    role_code VARCHAR(20) PRIMARY KEY,
    role_name VARCHAR(100) NOT NULL,
    description VARCHAR(200),
    is_active CHAR(1) DEFAULT 'Y',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 권한
CREATE TABLE erp_permission (
    role_code VARCHAR(20) NOT NULL,
    menu_code VARCHAR(20) NOT NULL,
    can_view CHAR(1) DEFAULT 'N',
    can_create CHAR(1) DEFAULT 'N',
    can_update CHAR(1) DEFAULT 'N',
    can_delete CHAR(1) DEFAULT 'N',
    can_approve CHAR(1) DEFAULT 'N',
    PRIMARY KEY (role_code, menu_code),
    FOREIGN KEY (role_code) REFERENCES erp_role(role_code)
);

-- 접속로그
CREATE TABLE erp_login_log (
    log_id SERIAL PRIMARY KEY,
    user_id VARCHAR(50) NOT NULL,
    login_at TIMESTAMP NOT NULL,
    logout_at TIMESTAMP,
    ip_address VARCHAR(50),
    login_method VARCHAR(20),
    login_result VARCHAR(10),
    fail_reason VARCHAR(100),
    user_agent VARCHAR(200)
);
```

---

## 8. API 설계

### 8.1 회계 API
```
POST   /api/erp/voucher                   전표 등록
GET    /api/erp/voucher                   전표 목록 조회
GET    /api/erp/voucher/{voucher_no}      전표 상세 조회
PUT    /api/erp/voucher/{voucher_no}      전표 수정
POST   /api/erp/voucher/{voucher_no}/approve  전표 승인
DELETE /api/erp/voucher/{voucher_no}      전표 삭제
GET    /api/erp/gl/ledger                 총계정원장 조회
GET    /api/erp/gl/financial-statement    재무제표 조회
```

### 8.2 원가 API
```
GET    /api/erp/cost/standard             표준원가 조회
PUT    /api/erp/cost/standard             표준원가 설정
POST   /api/erp/cost/calculate            실제원가 계산
GET    /api/erp/cost/variance             원가차이 분석
GET    /api/erp/cost/report               원가 리포트
```

### 8.3 인사 API
```
POST   /api/erp/employee                  사원 등록
GET    /api/erp/employee                  사원 목록 조회
GET    /api/erp/employee/{emp_no}         사원 상세 조회
PUT    /api/erp/employee/{emp_no}         사원 정보 수정
GET    /api/erp/attendance                근태 조회
POST   /api/erp/attendance                근태 등록
POST   /api/erp/payroll/calculate         급여 계산
GET    /api/erp/payroll                   급여 조회
POST   /api/erp/payroll/confirm           급여 확정
```

### 8.4 시스템 API
```
POST   /api/erp/user                      사용자 등록
GET    /api/erp/user                      사용자 목록 조회
PUT    /api/erp/user/{user_id}            사용자 수정
POST   /api/erp/user/{user_id}/reset-password  비밀번호 초기화
GET    /api/erp/role                      역할 목록 조회
PUT    /api/erp/role/{role_code}/permission  권한 설정
GET    /api/erp/log/login                 접속로그 조회
```

---

## 9. 초기 데이터

### 9.1 계정과목 (주요)
| 코드 | 계정명 | 유형 | 설명 |
|------|--------|------|------|
| 110100 | 보통예금 | 자산 | 은행예금 |
| 120100 | 매출채권 | 자산 | 외상매출금 |
| 140100 | 원재료 | 자산 | 원재료 재고 |
| 140200 | 재공품 | 자산 | 재공품 재고 |
| 140300 | 제품 | 자산 | 완제품 재고 |
| 210100 | 매입채무 | 부채 | 외상매입금 |
| 410100 | 제품매출 | 수익 | 제품판매수익 |
| 510100 | 재료비 | 비용 | 재료비 |
| 510200 | 노무비 | 비용 | 인건비 |
| 510300 | 제조경비 | 비용 | 제조간접비 |

### 9.2 부서 코드
| 코드 | 부서명 |
|------|--------|
| D001 | 경영지원 |
| D002 | 영업팀 |
| D003 | 생산팀 |
| D004 | 품질팀 |
| D005 | 구매팀 |
| D006 | 연구개발 |

### 9.3 직급 코드
| 코드 | 직급 | 호봉기준 |
|------|------|----------|
| P01 | 사원 | 1-3년차 |
| P02 | 대리 | 4-7년차 |
| P03 | 과장 | 8-12년차 |
| P04 | 차장 | 13-17년차 |
| P05 | 부장 | 18년차 이상 |
| P06 | 이사 | 임원 |

### 9.4 역할 코드
| 코드 | 역할명 | 설명 |
|------|--------|------|
| ADMIN | 시스템관리 | 전체 시스템 관리 |
| PROD_MGR | 생산관리 | 생산/MES 관리 |
| QA_MGR | 품질관리 | 품질 관리 |
| INV_MGR | 재고관리 | 재고/자재 관리 |
| SALES | 영업담당 | 영업 업무 |
| PURCHASE | 구매담당 | 구매 업무 |
| FINANCE | 회계담당 | 회계/재무 |
| HR_MGR | 인사관리 | 인사/급여 |
| USER | 일반사용자 | 조회 권한만 |

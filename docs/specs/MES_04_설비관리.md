# MES 설비관리 모듈 기능정의서

## 모듈 개요

| 항목 | 내용 |
|------|------|
| **모듈ID** | MES-EQP |
| **모듈명** | 설비관리 |
| **화면수** | 10개 |
| **목적** | 설비 정보 관리, 가동현황 모니터링, OEE 분석, 보전관리 |
| **AI연계** | 설비 건강 판단, 예지보전 데이터 제공 |

---

## 화면 목록

| No | 화면ID | 화면명 | 개발우선순위 |
|----|--------|--------|-------------|
| 1 | MES-EQP-001 | 설비정보관리 | P1 |
| 2 | MES-EQP-002 | 설비조건항목관리 | P2 |
| 3 | MES-EQP-003 | 설비별조건항목관리 | P2 |
| 4 | MES-EQP-004 | 설비현황모니터링 | P1 |
| 5 | MES-EQP-005 | 설비가동현황 | P1 |
| 6 | MES-EQP-006 | 설비OEE현황 | P1 (AI연계) |
| 7 | MES-EQP-007 | 설비보전지시관리 | P2 |
| 8 | MES-EQP-008 | 설비보전이력현황 | P2 |
| 9 | MES-EQP-009 | 설비고장내역관리 | P1 |
| 10 | MES-EQP-010 | 설비수집정보조회 | P2 |

---

## 화면별 상세 기능정의

### MES-EQP-001 설비정보관리

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-001 |
| **화면명** | 설비정보관리 |
| **화면유형** | CRUD |
| **접근권한** | 설비관리자, 시스템관리자 |

#### 기능설명
SMT 라인을 구성하는 설비 마스터 정보를 관리한다.

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 필수 | 설명 |
|--------|--------|------|------|------|
| 설비코드 | equipment_code | VARCHAR(20) | Y | PK |
| 설비명 | equipment_name | VARCHAR(100) | Y | |
| 설비유형 | equipment_type | VARCHAR(20) | Y | LOADER/PRINTER/SPI/... |
| 공장코드 | plant_code | VARCHAR(10) | Y | FK |
| 라인코드 | line_code | VARCHAR(20) | Y | FK |
| 공정코드 | process_code | VARCHAR(20) | Y | FK |
| 제조사 | manufacturer | VARCHAR(100) | N | |
| 모델명 | model | VARCHAR(100) | N | |
| 시리얼번호 | serial_no | VARCHAR(50) | N | |
| 설치일자 | install_date | DATE | N | |
| 목표가동률 | target_availability | DECIMAL(5,2) | N | % |
| 목표성능 | target_performance | DECIMAL(5,2) | N | % |
| 목표품질 | target_quality | DECIMAL(5,2) | N | % |
| 목표OEE | target_oee | DECIMAL(5,2) | N | % |
| PM주기 | pm_interval_days | INT | N | 일 |
| 최종PM일자 | last_pm_date | DATE | N | |
| 상태 | status | VARCHAR(20) | Y | 가동/정지/고장/점검 |
| 사용여부 | is_active | BOOLEAN | Y | |

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ [검색조건]                                                   │
│ 공장: [전체▼] 라인: [전체▼] 설비유형: [전체▼] 상태: [전체▼]  │
│ [검색]                                                       │
├───────────────────────┬─────────────────────────────────────┤
│ [설비 목록]            │ [설비 상세 정보]                     │
│ 설비코드│설비명│라인│상태│  │ ┌─────────────────────────┐    │
│ ───────┼─────┼───┼──│  │ │ 기본정보 │ 목표값 │ PM정보│    │
│ PRNT-01│Printer│L01│가동│  │ └─────────────────────────┘    │
│ SPI-01 │SPI   │L01│가동│  │ 설비코드: [PRNT-01     ]       │
│ CHIP-01│Mounter│L01│가동│  │ 설비명: [Screen Printer #1]   │
│ REFL-01│Reflow│L01│정지│  │ 설비유형: [PRINTER▼]          │
│        │      │   │   │  │ 라인: [SMT-L01▼]               │
│        │      │   │   │  │ 제조사: [DEK           ]       │
│        │      │   │   │  │ 모델: [Horizon 03iX   ]       │
│        │      │   │   │  │ 설치일: [2022-03-15]          │
├───────────────────────┴─────────────────────────────────────┤
│ [신규] [저장] [삭제]                                         │
└─────────────────────────────────────────────────────────────┘
```

#### 초기 데이터 (SMT-L01 라인)
| 설비코드 | 설비명 | 유형 | 제조사 | 모델 | 목표OEE |
|----------|--------|------|--------|------|---------|
| SMT-LOAD-01 | Loader #1 | LOADER | Nutek | NTF110 | 95% |
| SMT-PRNT-01 | Printer #1 | PRINTER | DEK | Horizon 03iX | 90% |
| SMT-SPI-01 | SPI #1 | SPI | Koh Young | KY8030-3 | 98% |
| SMT-CHIP-01 | Chip Mounter #1 | CHIP_MOUNTER | Samsung | SM482 | 85% |
| SMT-CHIP-02 | Chip Mounter #2 | CHIP_MOUNTER | Samsung | SM482 | 85% |
| SMT-MULT-01 | Multi Mounter #1 | MULTI_MOUNTER | Samsung | SM482 | 82% |
| SMT-REFL-01 | Reflow Oven #1 | REFLOW | Heller | 1913 MKIII | 92% |
| SMT-AOI-01 | AOI #1 | AOI | Koh Young | Zenith | 95% |
| SMT-UNLD-01 | Unloader #1 | UNLOADER | Nutek | NTF110 | 95% |

---

### MES-EQP-002 설비조건항목관리

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-002 |
| **화면명** | 설비조건항목관리 |
| **화면유형** | CRUD |
| **접근권한** | 설비관리자 |

#### 기능설명
설비 유형별로 관리해야 할 파라미터 항목을 정의한다.

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 필수 | 설명 |
|--------|--------|------|------|------|
| 항목코드 | param_code | VARCHAR(20) | Y | PK |
| 항목명 | param_name | VARCHAR(100) | Y | |
| 설비유형 | equipment_type | VARCHAR(20) | Y | |
| 데이터타입 | data_type | VARCHAR(20) | Y | NUMBER/STRING/BOOLEAN |
| 단위 | unit | VARCHAR(20) | N | |
| 규격하한 | spec_min | DECIMAL(15,5) | N | |
| 규격상한 | spec_max | DECIMAL(15,5) | N | |
| 수집여부 | is_collected | BOOLEAN | Y | 자동수집 여부 |
| 사용여부 | is_active | BOOLEAN | Y | |

#### 설비유형별 파라미터 예시

**PRINTER (Screen Printer)**
| 항목코드 | 항목명 | 단위 | 규격하한 | 규격상한 |
|----------|--------|------|----------|----------|
| PRNT_PRESSURE | 스퀴지 압력 | MPa | 1.5 | 3.0 |
| PRNT_SPEED | 인쇄속도 | mm/s | 30 | 80 |
| PRNT_SEPARATION | 분리속도 | mm/s | 1 | 5 |
| PRNT_CLEAN_CYCLE | 클리닝주기 | 회 | 5 | 20 |

**REFLOW (Reflow Oven)**
| 항목코드 | 항목명 | 단위 | 규격하한 | 규격상한 |
|----------|--------|------|----------|----------|
| REFL_ZONE1_TEMP | Zone1 온도 | ℃ | 150 | 180 |
| REFL_ZONE2_TEMP | Zone2 온도 | ℃ | 180 | 210 |
| REFL_ZONE3_TEMP | Zone3 온도 | ℃ | 210 | 240 |
| REFL_ZONE4_TEMP | Zone4 온도 | ℃ | 240 | 260 |
| REFL_PEAK_TEMP | Peak 온도 | ℃ | 250 | 270 |
| REFL_CONV_SPEED | 컨베이어속도 | cm/min | 60 | 100 |

**CHIP_MOUNTER**
| 항목코드 | 항목명 | 단위 | 규격하한 | 규격상한 |
|----------|--------|------|----------|----------|
| MOUN_PICKUP_HEIGHT | 픽업높이 | mm | - | - |
| MOUN_PLACE_FORCE | 실장압력 | N | 0.5 | 3.0 |
| MOUN_FEEDER_COUNT | 피더수 | EA | - | - |
| MOUN_CPH | CPH (실장속도) | cph | - | - |

---

### MES-EQP-003 설비별조건항목관리

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-003 |
| **화면명** | 설비별조건항목관리 |
| **화면유형** | Master-Detail |
| **접근권한** | 설비관리자 |

#### 기능설명
개별 설비에 대한 파라미터 설정값을 관리한다.

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 필수 | 설명 |
|--------|--------|------|------|------|
| 설비코드 | equipment_code | VARCHAR(20) | Y | FK |
| 항목코드 | param_code | VARCHAR(20) | Y | FK |
| 설정값 | set_value | VARCHAR(100) | Y | |
| 허용오차 | tolerance | DECIMAL(10,2) | N | |

---

### MES-EQP-004 설비현황모니터링

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-004 |
| **화면명** | 설비현황모니터링 |
| **화면유형** | 실시간 모니터링 (대시보드) |
| **접근권한** | 전체 |
| **AI연계** | 설비 이상 감지 시 판단 요청 |

#### 기능설명
전체 설비의 실시간 상태를 모니터링한다.

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ 🖥️ 설비현황 모니터링 - 평택공장                              │
│ 라인: [전체▼]  마지막 업데이트: 14:35:22  🔄 [자동갱신 ON]   │
├─────────────────────────────────────────────────────────────┤
│ [라인별 설비 현황 - 시각화]                                   │
│                                                             │
│ ▼ SMT-L01 라인                                              │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│ │LOAD │→│PRINT│→│ SPI │→│CHIP1│→│CHIP2│→│REFL │→│ AOI │  │
│ │ ✅  │ │ ✅  │ │ ✅  │ │ ✅  │ │ ⚠️  │ │ ✅  │ │ ✅  │  │
│ │100% │ │ 95% │ │ 98% │ │ 87% │ │ 72% │ │ 93% │ │ 96% │  │
│ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘  │
│                                                             │
│ ▼ SMT-L02 라인                                              │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│ │LOAD │→│PRINT│→│ SPI │→│CHIP1│→│CHIP2│→│REFL │→│ AOI │  │
│ │ ✅  │ │ ✅  │ │ ✅  │ │ ✅  │ │ ✅  │ │ 🔴  │ │ ✅  │  │
│ │100% │ │ 92% │ │ 97% │ │ 85% │ │ 84% │ │정지 │ │ 95% │  │
│ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘  │
├─────────────────────────────────────────────────────────────┤
│ [상태 범례]                                                  │
│ ✅ 정상가동 (OEE≥85%)  ⚠️ 주의 (OEE<85%)  🔴 정지/고장      │
├─────────────────────────────────────────────────────────────┤
│ [알림]                                                       │
│ ⚠️ 14:30 SMT-CHIP-02: OEE 72% - 목표 대비 15% 하락          │
│ 🔴 14:25 SMT-REFL-01 (L02): 설비 정지 - 온도 이상            │
└─────────────────────────────────────────────────────────────┘
```

#### 상태 판정 기준
| 상태 | 아이콘 | 조건 |
|------|--------|------|
| 정상 | ✅ | OEE ≥ 85% AND 가동중 |
| 주의 | ⚠️ | 75% ≤ OEE < 85% |
| 위험 | 🟠 | OEE < 75% |
| 정지 | 🔴 | 설비 정지/고장 |

---

### MES-EQP-005 설비가동현황

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-005 |
| **화면명** | 설비가동현황 |
| **화면유형** | 조회/분석 |
| **접근권한** | 전체 |

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 설명 |
|--------|--------|------|------|
| 일자 | work_date | DATE | |
| 설비코드 | equipment_code | VARCHAR(20) | |
| 계획가동시간 | plan_uptime | INT | 분 |
| 실제가동시간 | actual_uptime | INT | 분 |
| 비가동시간 | downtime | INT | 분 |
| 가동률 | availability | DECIMAL(5,2) | % |
| 비가동횟수 | downtime_count | INT | |
| 주요비가동사유 | main_downtime_reason | VARCHAR(50) | |

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ [검색조건]                                                   │
│ 기간: [____]~[____] 라인: [전체▼] 설비: [전체▼] [검색]      │
├─────────────────────────────────────────────────────────────┤
│ [집계 정보]                                                  │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│ │ 평균가동률│ │총가동시간│ │총비가동  │ │비가동횟수│           │
│ │  91.2%  │ │ 2,340h  │ │ 210h    │ │  156회  │           │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
├─────────────────────────────────────────────────────────────┤
│ [설비별 가동률 차트]                                         │
│  LOAD-01 ████████████████████████████░░ 95%                 │
│  PRNT-01 ██████████████████████████░░░░ 92%                 │
│  SPI-01  █████████████████████████████░ 98%                 │
│  CHIP-01 ███████████████████████░░░░░░░ 85%                 │
│  CHIP-02 █████████████████░░░░░░░░░░░░░ 72% ⚠️              │
│  REFL-01 ████████████████████████████░░ 93%                 │
│  AOI-01  █████████████████████████████░ 96%                 │
├─────────────────────────────────────────────────────────────┤
│ [상세 그리드]                                                │
│ 일자│설비│계획시간│가동시간│비가동│가동률│비가동횟수│사유      │
│ ───┼───┼──────┼──────┼────┼────┼─────┼────               │
│01-29│CHIP-02│480분│345분│135분│72%│ 5회│피더오류            │
└─────────────────────────────────────────────────────────────┘
```

---

### MES-EQP-006 설비OEE현황

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-006 |
| **화면명** | 설비OEE현황 |
| **화면유형** | 분석/대시보드 |
| **접근권한** | 전체 |
| **AI연계** | **핵심 화면** - OEE 이상 시 AI 판단 트리거 |

#### 기능설명
설비 종합효율(OEE = 가동률 × 성능 × 품질)을 분석한다.

#### OEE 계산 공식
```
OEE = 가동률(A) × 성능(P) × 품질(Q)

가동률(Availability) = 실제가동시간 / 계획가동시간 × 100
성능(Performance) = (실제생산량 × 이론CT) / 실제가동시간 × 100
품질(Quality) = 양품수량 / 총생산량 × 100
```

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 설명 |
|--------|--------|------|------|
| 일자 | work_date | DATE | |
| 설비코드 | equipment_code | VARCHAR(20) | |
| 가동률 | availability | DECIMAL(5,2) | % |
| 성능 | performance | DECIMAL(5,2) | % |
| 품질 | quality | DECIMAL(5,2) | % |
| OEE | oee | DECIMAL(5,2) | % |
| 목표OEE | target_oee | DECIMAL(5,2) | % |
| 손실시간_고장 | loss_breakdown | INT | 분 |
| 손실시간_셋업 | loss_setup | INT | 분 |
| 손실시간_속도 | loss_speed | INT | 분 |
| 손실시간_불량 | loss_defect | INT | 분 |

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ 📊 설비 OEE 현황                                             │
│ 기간: [____]~[____] 라인: [SMT-L01▼] [검색]                 │
├─────────────────────────────────────────────────────────────┤
│ [라인 OEE 종합]                                              │
│ ┌──────────────────────────────────────────────────────┐   │
│ │     가동률(A)      성능(P)       품질(Q)      OEE     │   │
│ │    ┌─────┐       ┌─────┐       ┌─────┐     ┌─────┐  │   │
│ │    │91.2%│   ×   │89.5%│   ×   │98.2%│  =  │80.1%│  │   │
│ │    └─────┘       └─────┘       └─────┘     └─────┘  │   │
│ │    목표:92%      목표:90%      목표:99%    목표:85%  │   │
│ └──────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────┤
│ [설비별 OEE]                                                 │
│        설비    │  A   │  P   │  Q   │ OEE  │목표│ 상태     │
│ ───────────────┼─────┼─────┼─────┼─────┼───┼─────         │
│ PRNT-01        │92.0%│90.5%│98.5%│82.0%│85%│ ⚠️           │
│ SPI-01         │98.0%│99.0%│99.5%│96.5%│95%│ ✅           │
│ CHIP-01        │87.0%│85.0%│97.0%│71.8%│85%│ 🟠 AI요청    │
│ CHIP-02        │72.0%│80.0%│96.0%│55.3%│85%│ 🔴 AI요청    │
│ REFL-01        │93.0%│92.0%│99.0%│84.7%│90%│ ⚠️           │
│ AOI-01         │96.0%│98.0%│99.8%│93.9%│95%│ ✅           │
├─────────────────────────────────────────────────────────────┤
│ [OEE 추이 차트]                                              │
│  100%─                                                      │
│   90%─ ─ ─ ─ ─ ─ ─ ─ ─목표(85%)─ ─ ─ ─ ─ ─                │
│   80%─────●───●───●───────●───●                            │
│   70%─              ╲   ╱                                   │
│   60%─               ●●                                     │
│   50%┴───┴───┴───┴───┴───┴───→ 일자                       │
│      01-24 25  26  27  28  29                               │
├─────────────────────────────────────────────────────────────┤
│ [6대 로스 분석]                                              │
│ ■ 고장 (Breakdown): 45분 (22%)                              │
│ ■ 셋업 (Setup): 30분 (15%)                                  │
│ ■ 공회전 (Idling): 25분 (12%)                               │
│ ■ 속도저하 (Speed Loss): 55분 (27%)                         │
│ ■ 불량 (Defect): 35분 (17%)                                 │
│ ■ 초기수율 (Startup): 15분 (7%)                             │
└─────────────────────────────────────────────────────────────┘
```

#### AI 연계 로직
```
OEE 계산 후:
1. OEE < 75% (목표 대비 10% 이상 하락) 시:
   - AI 플랫폼으로 설비 판단 요청 전송
   - 요청 데이터:
     {
       "workflow_id": "equipment_health_check",
       "input_data": {
         "equipment_code": "SMT-CHIP-02",
         "oee_current": 0.55,
         "oee_target": 0.85,
         "availability": 0.72,
         "performance": 0.80,
         "quality": 0.96,
         "downtime_events": [
           {"code": "FEEDER_ERROR", "count": 5, "total_minutes": 45},
           {"code": "RECOGNITION_ERROR", "count": 3, "total_minutes": 25}
         ],
         "last_pm_date": "2024-12-15",
         "pm_interval_days": 30
       }
     }
2. AI 판단 결과:
   - PM 권고 (긴급/정기)
   - 점검 필요 부위 안내
   - 자동 보전요청 생성 (Workflow)
```

---

### MES-EQP-007 설비보전지시관리

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-007 |
| **화면명** | 설비보전지시관리 |
| **화면유형** | CRUD |
| **접근권한** | 설비관리자 |

#### 기능설명
예방보전(PM) 및 사후보전(BM) 작업지시를 관리한다. AI 권고에 의해 자동 생성될 수 있음.

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 필수 | 설명 |
|--------|--------|------|------|------|
| 보전지시번호 | pm_order_no | VARCHAR(20) | Y | PK |
| 설비코드 | equipment_code | VARCHAR(20) | Y | FK |
| 보전유형 | pm_type | VARCHAR(10) | Y | PM/BM |
| 요청일자 | request_date | DATE | Y | |
| 예정일자 | plan_date | DATE | Y | |
| 완료일자 | complete_date | DATE | N | |
| 작업내용 | work_content | VARCHAR(1000) | Y | |
| 담당자 | assignee_id | VARCHAR(20) | N | |
| 상태 | status | VARCHAR(20) | Y | 대기/진행/완료/취소 |
| 우선순위 | priority | VARCHAR(10) | Y | 긴급/높음/보통/낮음 |
| AI생성여부 | is_ai_generated | BOOLEAN | Y | |
| AI판단ID | ai_judgment_id | VARCHAR(30) | N | |

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ [검색조건]                                                   │
│ 기간: [____]~[____] 설비: [전체▼] 유형: [전체▼] 상태: [전체▼]│
│ [검색] [PM계획생성] [AI권고조회]                              │
├─────────────────────────────────────────────────────────────┤
│ [보전지시 목록]                                              │
│ 번호│설비│유형│예정일│작업내용│담당│상태│우선순위│AI        │
│ ───┼───┼───┼────┼──────┼───┼───┼─────┼──                 │
│PM-001│CHIP-02│PM│01-30│정기점검│김정비│대기│보통│           │
│PM-002│CHIP-02│BM│01-29│피더교체│김정비│진행│긴급│🤖 AI권고  │
│PM-003│REFL-01│PM│02-01│히터교체│박정비│대기│높음│           │
├─────────────────────────────────────────────────────────────┤
│ [상세 정보]                                                  │
│ 보전지시번호: [PM-002       ]  상태: [진행▼]                 │
│ 설비: [SMT-CHIP-02▼]  유형: [BM▼]  우선순위: [긴급▼]        │
│ 예정일: [2025-01-29]  완료일: [          ]                   │
│ 담당자: [김정비▼]                                            │
│ 작업내용:                                                    │
│ [피더 5번 흡착 불량 - 노즐 교체 및 피더 정렬 필요            │
│  AI 분석 결과: 피더 노즐 마모로 흡착률 저하 추정             ]│
│                                                             │
│ [신규] [저장] [완료처리]                                     │
└─────────────────────────────────────────────────────────────┘
```

---

### MES-EQP-008 설비보전이력현황

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-008 |
| **화면명** | 설비보전이력현황 |
| **화면유형** | 조회 |
| **접근권한** | 전체 |

#### 기능설명
설비별 보전 이력을 조회하고 분석한다.

---

### MES-EQP-009 설비고장내역관리

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-009 |
| **화면명** | 설비고장내역관리 |
| **화면유형** | CRUD |
| **접근권한** | 설비관리자 |

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 필수 | 설명 |
|--------|--------|------|------|------|
| 고장ID | breakdown_id | VARCHAR(20) | Y | PK |
| 설비코드 | equipment_code | VARCHAR(20) | Y | FK |
| 발생일시 | occur_time | TIMESTAMP | Y | |
| 복구일시 | recover_time | TIMESTAMP | N | |
| 고장시간 | downtime_min | INT | N | 자동계산 |
| 고장유형 | breakdown_type | VARCHAR(20) | Y | |
| 고장원인 | cause | VARCHAR(500) | N | |
| 조치내용 | action | VARCHAR(500) | N | |
| 교체부품 | replaced_parts | VARCHAR(500) | N | |
| 담당자 | technician_id | VARCHAR(20) | N | |
| 상태 | status | VARCHAR(20) | Y | 발생/처리중/복구 |

#### 고장유형 코드
| 코드 | 유형 | 설명 |
|------|------|------|
| BRK01 | 기계고장 | 기계적 부품 고장 |
| BRK02 | 전기고장 | 전기/전자 부품 고장 |
| BRK03 | 제어오류 | SW/제어 오류 |
| BRK04 | 피더오류 | 피더 관련 오류 (SMT) |
| BRK05 | 센서오류 | 센서 불량/오작동 |
| BRK06 | 온도이상 | 온도 관련 이상 |

---

### MES-EQP-010 설비수집정보조회

#### 기본정보
| 항목 | 내용 |
|------|------|
| **화면ID** | MES-EQP-010 |
| **화면명** | 설비수집정보조회 |
| **화면유형** | 조회 (시계열) |
| **접근권한** | 설비관리자 |

#### 기능설명
설비에서 자동 수집된 파라미터 데이터를 조회한다.

#### 데이터 항목
| 필드명 | 필드ID | 타입 | 설명 |
|--------|--------|------|------|
| 수집ID | collect_id | BIGINT | PK |
| 수집일시 | collect_time | TIMESTAMP | |
| 설비코드 | equipment_code | VARCHAR(20) | |
| 항목코드 | param_code | VARCHAR(20) | |
| 수집값 | value | VARCHAR(100) | |
| 규격이탈여부 | is_out_of_spec | BOOLEAN | |

#### 화면 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ [검색조건]                                                   │
│ 설비: [SMT-REFL-01▼] 항목: [전체▼] 기간: [____]~[____]      │
│ 규격이탈만: [□] [검색]                                       │
├─────────────────────────────────────────────────────────────┤
│ [파라미터 트렌드 차트]                                        │
│  280℃─        UCL=270                                       │
│  260℃─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─                        │
│  250℃────●───●───●───●───●───●────                        │
│  240℃─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─                        │
│  220℃─        LCL=250                                       │
│      └───┴───┴───┴───┴───┴───→ 시간                        │
│       09:00  10:00  11:00  12:00  13:00  14:00              │
│                                                             │
│ [선택항목] ◉ Zone4온도 ○ Peak온도 ○ 컨베이어속도            │
├─────────────────────────────────────────────────────────────┤
│ [수집 데이터 그리드]                                         │
│ 시간│Zone1│Zone2│Zone3│Zone4│Peak│Speed│이탈               │
│ ───┼────┼────┼────┼────┼───┼────┼───                      │
│14:30│165℃│195℃│225℃│255℃│262℃│80cm│                      │
│14:35│166℃│196℃│226℃│256℃│263℃│80cm│                      │
│14:40│167℃│198℃│228℃│272℃│275℃│80cm│⚠️Zone4,Peak         │
└─────────────────────────────────────────────────────────────┘
```

---

## 테이블 설계

### 주요 테이블 목록
| 테이블명 | 설명 |
|----------|------|
| mes_equipment | 설비 마스터 |
| mes_equipment_param | 설비 파라미터 항목 |
| mes_equipment_param_value | 설비별 파라미터 값 |
| mes_equipment_status | 설비 상태 (실시간) |
| mes_equipment_oee | 설비 OEE (일별) |
| mes_pm_order | 보전지시 |
| mes_pm_history | 보전이력 |
| mes_breakdown | 고장내역 |
| mes_equipment_data | 설비 수집데이터 |

---

## API 엔드포인트

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | /api/mes/equipment | 설비 목록 |
| GET | /api/mes/equipment/{code} | 설비 상세 |
| POST | /api/mes/equipment | 설비 등록 |
| GET | /api/mes/equipment/status | 실시간 설비 상태 |
| GET | /api/mes/equipment/{code}/oee | 설비별 OEE |
| GET | /api/mes/equipment/oee-summary | OEE 요약 |
| GET | /api/mes/pm-orders | 보전지시 목록 |
| POST | /api/mes/pm-orders | 보전지시 등록 |
| PUT | /api/mes/pm-orders/{no}/complete | 보전 완료 |
| GET | /api/mes/breakdowns | 고장내역 조회 |
| POST | /api/mes/breakdowns | 고장 등록 |
| GET | /api/mes/equipment/{code}/data | 수집데이터 조회 |

---

*문서버전: 1.0*
*작성일: 2025-01-29*
